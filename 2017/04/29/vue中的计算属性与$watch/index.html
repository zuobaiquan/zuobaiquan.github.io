<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Vue中的计算属性与$watch | zuobaiquan</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="计算属性：在模板中绑定表达式是非常便利的，但是他们实际上只用于简单的操作。模板是为了描述视图的结构。在模板中放入太多的逻辑会让模板过重且难以维护。"><meta property="og:type" content="article"><meta property="og:title" content="Vue中的计算属性与$watch"><meta property="og:url" content="https://zuobaiquan.github.io/2017/04/29/vue中的计算属性与$watch/index.html"><meta property="og:site_name" content="zuobaiquan"><meta property="og:description" content="计算属性：在模板中绑定表达式是非常便利的，但是他们实际上只用于简单的操作。模板是为了描述视图的结构。在模板中放入太多的逻辑会让模板过重且难以维护。"><meta property="og:updated_time" content="2017-04-29T15:38:02.482Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Vue中的计算属性与$watch"><meta name="twitter:description" content="计算属性：在模板中绑定表达式是非常便利的，但是他们实际上只用于简单的操作。模板是为了描述视图的结构。在模板中放入太多的逻辑会让模板过重且难以维护。"><link rel="alternative" href="/atom.xml" title="zuobaiquan" type="application/atom+xml"><link rel="stylesheet" href="/css/style.css"><!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]--></head></html><body><div id="container"><div id="wrap"><header id="header"><div id="banner"></div><div id="header-outer" class="outer"><nav id="upper-nav" class="inner"><a id="main-nav-toggle" class="nav-icon"></a><div class="sub-nav"><a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a><a id="nav-github" class="nav-icon" href="https://github.com/zuobaiquan"></a></div></nav><div id="header-title"><h1 id="blog-title-wrap"><a href="/" id="blog-title">热爱前端喜欢分享的程序猿</a></h1></div><div id="contenedor"><ul class="cube"><li class="cara">前端</li><li class="cara">框架</li><li class="cara">JS</li><li class="cara">HTML5</li><li class="cara">CSS</li><li class="cara">心得</li></ul></div><nav id="main-nav"><a class="main-nav-link" href="/">首页</a> <a class="main-nav-link" href="/archives">归档</a> <a class="main-nav-link" href="/about">关于</a> <a class="main-nav-link" href="/resume">简历</a> <a class="main-nav-link" href="https://zuobaiquan.github.io/tags/英语学习">英语学习</a> <a class="main-nav-link" href="http://weibo.com/zuobaiquan" target="_blank">微博</a> <a class="main-nav-link" href="https://www.zhihu.com/people/zuobaiquan" target="_blank">知乎</a> <a class="main-nav-link" href="https://github.com/zuobaiquan?tab=repositories" target="_blank">Github</a></nav></div></header><div class="outer"><section id="main"><article id="post-vue中的计算属性与$watch" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><h3 href="/2017/04/29/vue中的计算属性与$watch/" class="article-date"><time datetime="2017-04-29T15:11:49.000Z" itemprop="datePublished">2017-04-29</time></h3></div><div class="article-inner"><div class="curve-down"><div class="fill-content"><header class="article-header"><h1 class="article-title" itemprop="name">Vue中的计算属性与$watch</h1></header><div class="article-entry" itemprop="articleBody"><p>计算属性：在模板中绑定表达式是非常便利的，但是他们实际上只用于简单的操作。模板是为了描述视图的结构。在模板中放入太多的逻辑会让模板过重且难以维护。<a id="more"></a>这就是为什么vue.js将绑定表达式限制为一个表达式。如果需要多于一个表达式的逻辑，应当使用计算属性。</p><pre><code class="html">&lt;div id=&quot;box&quot;&gt;
    a={{a}},b={{b}}
&lt;/div&gt;
</code></pre><pre><code class="javascript">new Vue({
  data:{
    a:1
  },
  computed:{
    b:function(){
      return this.a + 1
    }
  }
}).$mount(&quot;#box&quot;);
</code></pre><p>这里我们声明了一个计算属性b。我们提供的函数将用作属性vm.b的getter</p><p>你可以打开浏览器的控制台，修改 vm。vm.b 的值始终取决于 vm.a 的值。</p><p>你可以像绑定普通属性一样在模板中绑定计算属性。Vue 知道 vm.b 依赖于vm.a，因此当vm.a 发生改变时，依赖于 vm.b 的绑定也会更新。而且最妙的是我们是声明式地创建这种依赖关系：计算属性的 getter 是干净无副作用的，因此也是易于<a href="http://lib.csdn.net/base/softwaretest" target="_blank" rel="external">测试</a>和理解的。</p><h3 id="计算属性-vs-watch"><a href="#计算属性-vs-watch" class="headerlink" title="计算属性 vs. $watch"></a>计算属性 vs. $watch</h3><p>计算属性 vs. $watch</p><h3 id="计算属性-vs-watch-1"><a href="#计算属性-vs-watch-1" class="headerlink" title="计算属性 vs. $watch"></a>计算属性 vs. $watch</h3><p>Vue.js 提供了一个方法 <code>$watch</code>，它用于观察 Vue 实例上的数据变动。当一些数据需要根据其它数据变化时， <code>$watch</code> 很诱人 —— 特别是如果你来自 Angularjs。不过，通常更好的办法是使用计算属性而不是一个命令式的 <code>$watch</code> 回调。考虑下面例子：</p><pre><code class="html">&lt;div id=&quot;box&quot;&gt;
    {{fullName}}
&lt;/div&gt;
</code></pre><pre><code class="javascript">var vm=new Vue({
  el:&quot;#box&quot;,
  data:{
    firstName: &#39;Foo&#39;,
    lastName: &#39;Bar&#39;,
    fullName: &#39;Foo Bar&#39;
  },
});
//使用$watch
vm.$watch(&#39;firstName&#39;, function (val) {
  this.fullName = val + &#39; &#39; + this.lastName
})

vm.$watch(&#39;lastName&#39;, function (val) {
  this.fullName = this.firstName + &#39; &#39; + val
});
</code></pre><p>上面代码是命令式的重复的。跟计算属性对比：</p><pre><code class="javascript">
var vm = new Vue({
  el: &#39;#demo&#39;,
  data: {
    firstName: &#39;Foo&#39;,
    lastName: &#39;Bar&#39;
  },
  computed: {
    fullName: function () {
      return this.firstName + &#39; &#39; + this.lastName
    }
  }
})
</code></pre><p>这样更好，不是吗？</p><h3 id="计算-setter"><a href="#计算-setter" class="headerlink" title="计算 setter"></a>计算 setter</h3><p>计算属性默认只是 getter，不过在需要时你也可以提供一个 setter：</p><pre><code class="javascript">
// ...
computed: {
  fullName: {
    // getter
    get: function () {
      return this.firstName + &#39; &#39; + this.lastName
    },
    // setter
    set: function (newValue) {
      var names = newValue.split(&#39; &#39;)
      this.firstName = names[0]
      this.lastName = names[names.length - 1]
    }
  }
}
// ...
</code></pre><p>现在在调用 vm.fullName = ‘John Doe’ 时，setter 会被调用，vm.firstName 和vm.lastName 也会有相应更新。</p><p>关于计算属性背后的原理和技术细节详见<a href="http://cn.vuejs.org/guide/reactivity.html#计算属性的奥秘" target="_blank" rel="external">计算属性的奥秘</a>。</p><p>总结 ：</p><p>计算属性：用于简单场合，比如计算，合并字符串等；</p><p>watch属性：用于耗时的，可以异步的获取远程服务上的数据这样的操作。</p><p>参考资料：</p><p><a href="http://cn.vuejs.org/v2/guide/reactivity.html#main" target="_blank" rel="external">http://cn.vuejs.org/v2/guide/reactivity.html#main</a></p><p><a href="http://cn.vuejs.org/v2/guide/computed.html" target="_blank" rel="external">http://cn.vuejs.org/v2/guide/computed.html</a></p><p><a href="https://github.com/zuobaiquan/Vue/tree/master/01vue%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86" target="_blank" rel="external">https://github.com/zuobaiquan/Vue/tree/master/01vue%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86</a></p></div><footer class="article-footer"><div class="article-footer-content"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/">Vue</a></li></ul><a data-url="https://zuobaiquan.github.io/2017/04/29/vue中的计算属性与$watch/" data-id="cj24ohi7e0017l8n3qyxnnac4" class="article-share-link">分享到</a></div></footer></div></div></div><nav id="article-nav"><a href="/2017/04/30/vue组件--slot内容分发/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">下一篇</strong><div class="article-nav-title">Vue组件--slot内容分发</div></a><a href="/2017/03/21/JS排序总结/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">上一篇</strong><div class="article-nav-title">JS排序总结</div></a></nav></article></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">近期文章</h3><div class="widget"><ul><li><a href="/2017/04/30/vue组件--slot内容分发/">Vue组件--slot内容分发</a></li><li><a href="/2017/04/29/vue中的计算属性与$watch/">Vue中的计算属性与$watch</a></li><li><a href="/2017/03/21/JS排序总结/">JS排序总结</a></li><li><a href="/2016/09/21/如何在代码中减少if else语句的使用/">如何在代码中减少if else语句的使用</a></li><li><a href="/2016/08/11/CSS实现背景透明，文字不透明(兼容所有浏览器)/">CSS实现背景透明，文字不透明(兼容所有浏览器)</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">标签</h3><div class="widget"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/英语学习/">英语学习</a><span class="tag-list-count">16</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">友情链接</h3><div class="widget"><ul><li><a href="http://www.zhangxinxu.com/" target="_blank">张鑫旭</a></li><li><a href="http://zhangwenli.com/" target="_blank">张雯丽</a></li><li><a href="http://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000" target="_blank">廖雪峰</a></li><li><a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank">阮一峰</a></li></ul></div></div></aside></div><footer id="footer" style="padding:20px 0 0"><div class="outer" style="height:50px;overflow:hidden"><div id="footer-info" class="inner">&copy; 2017 zuobaiquan<br><a style="color:#888" href="https://zuobaiquan.github.io/" target="_blank">欢迎访问我的博客哦</a></div></div></footer></div><nav id="mobile-nav"><a href="/" class="mobile-nav-link">首页</a> <a href="/archives" class="mobile-nav-link">归档</a> <a href="/about" class="mobile-nav-link">关于</a> <a href="/resume" class="mobile-nav-link">简历</a></nav><div id="totop"><a title="返回顶部"></a></div><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/lrsjng.jquery-qrcode/0.12.0/jquery.qrcode.min.js"></script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script src="/js/script.js"></script></div></body>