"use strict";$(function(){function i(i){d.productTypeId=i,o(d);for(var s=[],a=0;a<c.length;a++)if(c[a].productTypeId==i){s=c[a].sonProductType;break}for(var e='<li class="type-nolimit active">不限</li>',n=0;n<s.length;n++)e+='<li data-twoid="'+i+'" data-id="'+s[n].productTypeId+'">'+s[n].typeName+"</li>";$(".condition-goodstwotype .list-boxs").html(e),$(".condition-goodstwotype").show(),$(".condition-goodstwotype .list-boxs li").click(function(){$(this).addClass("active").siblings().removeClass("active");var i=$(this).data("id"),o=$(this).data("twoid");t(o,i)})}function t(i,t){d.productTypeId=t,o(d);for(var s=[],a=0;a<c.length;a++)if(c[a].productTypeId==i)for(var e=0;e<c[a].sonProductType.length;e++)if(c[a].sonProductType[e].productTypeId==t){s=c[a].sonProductType[e].sonProductType;break}for(var n='<li class="type-nolimit active">不限</li>',e=0;e<s.length;e++)n+='<li data-id="'+s[e].productTypeId+'">'+s[e].typeName+"</li>";$(".condition-goodsthreetype .list-boxs").html(n),$(".condition-goodstwotype,.condition-goodsthreetype").show(),$(".condition-goodsthreetype .list-boxs li").click(function(){$(this).addClass("active").siblings().removeClass("active"),d.productTypeId=$(this).data("id"),o(d)})}function o(i){tool.ajax("/product/product/findPagePc",i,function(i){for(var t=i.data.records||[],o="",s=0;s<t.length;s++){t[s].createTime=new Date(t[s].createTime).Format("yyyy-MM-dd");for(var e="",c=0;c<parseInt(t[s].customerStoreRatings);c++)e+='<span class="star"></span>';o+='<li>\n          <img class="supply-image" src="'+t[s].productImg+'" alt="">\n          <div class="supply-title"><span>'+(t[s].productName||"--")+'</span></div>\n          <div title="'+(t[s].customerAddr?t[s].customerAddr:"")+'" class="supply-item supply-addr">地区：'+(t[s].customerAddr||"未知")+'</div>\n          <div class="supply-item">供应商：'+(t[s].customerName||"未知")+'</div>\n          <div class="supply-item">发布时间：'+t[s].createTime+'</div>\n          <div class="supply-item">平台认证：'+(e?e:"未认证")+'</div>\n          <div class="supply-item">'+(p?'挂牌价：<span class="supply-price">￥'+t[s].salePrice+"</span>":'<span class="login-icon"></span>登陆后显示详细信息')+"</div>\n        </li>"}if($(".supply-goodslist").html(o),0==t.length?($("#goodPagination").hide(),$(".supply-nogoods").show(),$(".supply-nogoods p").text("对不起，对应商品分类或筛选组合下没有商品")):($(".supply-nogoods").hide(),$("#goodPagination").show()),$.jqPaginator){var r=function(){if(i.data.pages<a)return{v:void 0};var t={};(d.countries||l.countries||n)&&(t.d=n);var o=[];for(var s in t)o.push(s+"="+t[s]);$.jqPaginator("#goodPagination",{totalPages:i.data.pages,visiblePages:5,currentPage:a,prev:'<li class="prev"><a href="supplyinfo.html?p='+(a-1)+(o.length>0?"&":""+o.join("&"))+'">上一页</a></li>',next:'<li class="next"><a href="supplyinfo.html?p='+(a+1)+(o.length>0?"&":""+o.join("&"))+'">下一页</a></li>',page:'<li class="page"><a href="#">{{page}}</a></li>',onPageChange:function(){$("#goodPagination .page").each(function(){var i=+$(this).find("a").text();$(this).find("a").attr("href","supplyinfo.html?p="+i+(o.length>0?"&":""+o.join("&")))})}})}();if("object"==typeof r)return r.v}})}function s(i){tool.ajax("/customer/enterprise/page",i,function(i){for(var t=i.data.records,o="",s=0;s<t.length;s++){t[s].createTime=new Date(t[s].createTime).Format("yyyy-MM-dd");for(var n="",d=0;d<parseInt(t[s].storeRatings);d++)n+='<span class="star"></span>';o+='<li>\n					<div class="company-addr" title='+(t[s].addr?t[s].addr:"")+'><span class="addr-icon"></span>'+(t[s].addr||"未知")+'</div>\n					<img class="company-logo" src="'+t[s].headImg+'" alt="">\n					<div class="supply-star">'+n+'</div>\n					<p class="company-name">'+(t[s].companyName||"--")+'</p>\n					<div class="company-des">\n						<span>'+(t[s].introduction||"--")+"</span>\n					</div>\n				</li>"}if($(".supply-companylist").html(o),0==t.length?($("#goodPagination").hide(),$(".supply-nogoods").show(),$(".supply-nogoods p").text("对不起，对应企业分类或筛选组合下没有企业")):($("#goodPagination").show(),$(".supply-nogoods").hide()),$.jqPaginator){if(i.data.pages<a)return;$.jqPaginator("#goodPagination",{totalPages:i.data.pages,visiblePages:5,currentPage:a,prev:'<li class="prev"><a href="supplyinfo.html?tab='+e+"&p="+(a-1)+'">上一页</a></li>',next:'<li class="next"><a href="supplyinfo.html?tab='+e+"&p="+(a+1)+'">下一页</a></li>',page:'<li class="page"><a href="#">{{page}}</a></li>',onPageChange:function(){$("#goodPagination .page").each(function(){var i=+$(this).find("a").text();$(this).find("a").attr("href","supplyinfo.html?tab="+e+"&p="+i)})}})}})}var a=+tool.getUrlParam("p")||1,e=+tool.getUrlParam("tab")||0,n=tool.getUrlParam("d")?decodeURIComponent(tool.getUrlParam("d")):"",d={page:a,size:8,productStatus:1},l={page:a,size:9},p=!1;1==e?($(".good-condition,.supply-goodslist,.supply-sort,.condition-goodsonetype,.condition-goodstwotype,.condition-goodsthreetype").hide(),$(".supply-companylist,.industry-list").show(),$("#searchType .list-boxs li").eq(1).addClass("active").siblings().removeClass("active"),s(l)):o(d),$(".supply-sort .price").click(function(){$(this).hasClass("price-activeup")||$(this).hasClass("price-activedown")?$(this).hasClass("price-activeup")&&!$(this).hasClass("price-activedown")?(d.priceSort="asc",o(d),$(this).addClass("price-activedown").removeClass("price-activeup")):!$(this).hasClass("price-activeup")&&$(this).hasClass("price-activedown")&&(delete d.priceSort,o(d),$(this).removeClass("price-activedown").removeClass("price-activeup")):($(this).addClass("price-activeup"),d.priceSort="desc",o(d))}),$("#searchType .list-boxs li").click(function(){var i=$(this).index();i!=e&&(e=i,$(this).addClass("active").siblings().removeClass("active"),1==i?(a=1,delete l.countries,s(l),$(".good-condition,.supply-goodslist,.supply-sort,.condition-goodsonetype,.condition-goodstwotype,.condition-goodsthreetype").hide(),$(".supply-companylist,.industry-list").show()):(a=1,delete d.countries,o(d),$(".good-condition,.supply-goodslist,.supply-sort,.condition-goodsonetype").show(),$(".supply-companylist,.industry-list").hide(),$(".condition-goodsonetype .type-nolimit").addClass("active").siblings().removeClass("active")),$(".condition-distinct .list-boxs li").eq(0).addClass("active").siblings().removeClass("active"))});var c=[];tool.ajax("/product/productType/findByParentIdTreeShape",{parentId:0},function(t){var o=[];c=t.data;for(var s=0;s<c.length;s++)o.push({typeName:c[s].typeName,productTypeId:c[s].productTypeId});for(var a='<li class="type-nolimit active">不限</li>',e=0;e<o.length;e++)a+='<li data-id="'+o[e].productTypeId+'">'+o[e].typeName+"</li>";$(".condition-goodsonetype .list-boxs").html(a),$(".condition-goodsonetype .list-boxs li").click(function(){$(this).addClass("active").siblings().removeClass("active");var t=$(this).data("id");i(t)})}),$(document).on("click",".condition-goodsonetype .type-nolimit",function(){delete d.productTypeId,o(d),$(".condition-goodstwotype,.condition-goodsthreetype").hide()}),$(document).on("click",".condition-goodstwotype .type-nolimit",function(){delete d.productTypeId,o(d),$(".condition-goodsthreetype").hide()}),$(".arrow-ldown").click(function(){$(this).toggleClass("arrow-lup"),$(".condition-list.condition-distinct .list-boxs").toggleClass("show-allboxs")}),tool.ajax("/organization/paramConfig/findTree",{paramTypeKeyWord:"major_business"},function(i){for(var t=i.data,o='<li class="active">不限</li>',a=0;a<t.length;a++)o+='<li data-bsid="'+t[a].paramConfig.id+'">'+t[a].paramConfig.name+"</li>";$(".industry-list .list-boxs").html(o),$(".industry-list .list-boxs li").click(function(){$(this).addClass("active").siblings().removeClass("active");var i=$(this).data("bsid");i?l.industryType=i:delete l.industryType,s(l)})}),tool.ajax("/organization/paramConfig/findTree",{paramTypeKeyWord:"country"},function(i){for(var t=i.data,a='<li class="active">不限</li>',n=0;n<t.length;n++)a+='<li data-name="'+t[n].paramConfig.value+'">'+t[n].paramConfig.name+"</li>";$(".condition-distinct .list-boxs").html(a),$(".condition-distinct .list-boxs li").click(function(){$(this).addClass("active").siblings().removeClass("active");var i=$(this).data("name")||"";1==e?(i?l.countries=i:delete l.countries,s(l)):(i?d.countries=i:delete d.countries,o(d))})})});