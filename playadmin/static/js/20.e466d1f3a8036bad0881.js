webpackJsonp([20],{BFPD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("+KWZ"),r={data:function(){var e=function(e,t,a){return t?/(^[1-9]{1}[0-9]*$)|(^[0-9]*\.[0-9]{1,2}$)/.test(t)?void a():a(new Error("价格格式不正确")):a(new Error("价格不为空"))};return{gameGradechecked:!1,gameAreachecked:!1,form:{title:0,price:""},rules:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],price:[{required:!0,validator:e,trigger:"blur"}]},edit:this.$route.params.editid,flag:this.$route.params.flag,dialogFormVisible:!1,dialogTitle:"",addType:"",addValue:"",gameGradeList:[],gameAreaList:[],form2:{},rules2:{price:[{required:!0,validator:e,trigger:"blur"}]}}},created:function(){var e=this;-1==this.flag?(Object(i.c)({id:this.edit}).then(function(t){e.form=t.data.data}),this.$route.meta.title="编辑游戏"):this.$route.meta.title="添加游戏"},methods:{goBack:function(){this.$router.go(-1)},addGameBytype:function(e){this.addType=e,this.dialogFormVisible=!0,"grade"==e?this.dialogTitle="添加游戏等级":"area"==e&&(this.dialogTitle="添加游戏大区")},deleteBytype:function(e,t){"grade"==e?this.gameGradeList.splice(t,1):"area"==e&&this.gameAreaList.splice(t,1)},addSubmit:function(){if(this.addValue){if("grade"==this.addType){if(this.gameGradeList.includes(this.addValue))return void this.$message({message:"游戏等级名称已存在",type:"warning"});this.gameGradeList.push(this.addValue),this.dialogFormVisible=!1,this.addValue=""}else if("area"==this.addType){if(this.gameAreaList.includes(this.addValue))return void this.$message({message:"游戏大厅名称已存在",type:"warning"});this.gameAreaList.push(this.addValue),this.dialogFormVisible=!1,this.addValue=""}}else this.$message({message:"grade"==this.addType?"游戏等级名称不为空":"游戏大厅名称不为空",type:"warning"})},submitRes:function(e){var t=this;this.$refs[e].validate(function(e){if(!e||!t.handelErrorForm())return!1;-1==t.flag?Object(i.b)({id:t.form.id,title:t.form.title,content:t.form.content,status:t.form.status}).then(function(e){200==e.status&&0==e.data.code?(t.$message({message:"修改成功",type:"success"}),t.$router.replace({name:"Activity"})):t.$message({message:e.data.message||"添加失败",type:"warning"})}):Object(i.a)({title:t.form.title,content:t.form.content,status:t.form.status}).then(function(e){200==e.status&&0==e.data.code?(t.$message({message:"添加成功",type:"success"}),t.$router.replace({name:"Activity"})):t.$message({message:e.data.message||"添加失败",type:"warning"})})})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"游戏名称：",prop:"title"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入游戏名称"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"价格设置：",prop:"title"}},[a("el-input",{staticStyle:{width:"250px","margin-right":"10px"},attrs:{placeholder:"请输入价格设置"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}}),e._v("元\n    ")],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-radio",{attrs:{label:0}},[e._v("上架")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("下架")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"status"}},[a("el-checkbox",{model:{value:e.gameGradechecked,callback:function(t){e.gameGradechecked=t},expression:"gameGradechecked"}},[e._v("游戏等级：")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:!e.gameGradechecked,type:e.gameGradechecked?"primary":""},on:{click:function(t){e.addGameBytype("grade")}}},[e._v("添加游戏等级")]),e._v(" "),e._l(e.gameGradeList,function(t,i){return e.gameGradeList.length>0?a("el-button-group",{key:i,staticStyle:{"margin-left":"10px"}},[a("el-button",{attrs:{size:"mini"}},[e._v(e._s(t))]),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(t){e.deleteBytype("grade",i)}}})],1):e._e()})],2),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"status"}},[a("el-checkbox",{model:{value:e.gameAreachecked,callback:function(t){e.gameAreachecked=t},expression:"gameAreachecked"}},[e._v("游戏大区：")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:!e.gameAreachecked,type:e.gameAreachecked?"primary":""},on:{click:function(t){e.addGameBytype("area")}}},[e._v("添加游戏大区")]),e._v(" "),e._l(e.gameAreaList,function(t,i){return e.gameAreaList.length>0?a("el-button-group",{key:i,staticStyle:{"margin-left":"10px"}},[a("el-button",{attrs:{size:"mini"}},[e._v(e._s(t))]),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(t){e.deleteBytype("area",i)}}})],1):e._e()})],2),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRes("form")}}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1),e._v(" "),a("el-dialog",{staticStyle:{width:"60%",margin:"0 auto"},attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{staticStyle:{"text-align":"center"}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"grade"==e.addType?"请输入游戏等级名称":"请输入游戏大厅名称","auto-complete":"off"},model:{value:e.addValue,callback:function(t){e.addValue=t},expression:"addValue"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addSubmit()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},l=a("VU/8")(r,s,!1,null,null,null);t.default=l.exports}});