webpackJsonp([19],{wRcx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("V/8j"),l={data:function(){return{list:null,listLoading:!0,currentPage:1,totalNum:1,searchObj:{pageSize:10},selectTypeOptions:[{id:"all",name:"全部"},{id:"section",name:"部分"}]}},created:function(){this.fetchData()},methods:{handleFilter:function(){this.currentPage=1,String(this.searchObj.keyword)||delete this.searchObj.keyword,String(this.searchObj.type)||delete this.searchObj.type,this.fetchData()},fetchData:function(){var e=this;this.listLoading=!0,this.searchObj.pageNo=this.currentPage,Object(n.o)(this.searchObj).then(function(t){e.list=t.data.data.records,e.totalNum=t.data.data.total,e.listLoading=!1})},handleAdd:function(){this.$router.push({path:"noticeedit"})},delNotice:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.f)({id:e.id}).then(function(e){200==e.status&&0==e.data.code?(t.$message({type:"success",message:"已删除"}),t.fetchData()):t.$message({message:e.data.message||"操作失败",type:"warning"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.handleAdd()}}},[e._v("发送新消息")]),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"180px","margin-left":"50px"},attrs:{clearable:"",placeholder:"请输入关键字"},model:{value:e.searchObj.keyword,callback:function(t){e.$set(e.searchObj,"keyword",t)},expression:"searchObj.keyword"}}),e._v(" "),a("span",[e._v("状态：")]),e._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"搜索项"},model:{value:e.searchObj.type,callback:function(t){e.$set(e.searchObj,"type",t)},expression:"searchObj.type"}},e._l(e.selectTypeOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")]),e._v(" "),a("br"),a("br"),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.id)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发送对象类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("all"==t.row.type?"全部用户":"部分用户")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"人数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.sendCount||"--")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发送内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.content||"--")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发送时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("parseTime")(t.row.createTime))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.delNotice(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),e.totalNum/10>1?a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[1,10,20,30],"page-size":10,layout:"total, prev, pager, next, jumper",total:e.totalNum},on:{"current-change":e.handleCurrentChange}}):e._e()],1)},staticRenderFns:[]},s=a("VU/8")(l,i,!1,null,null,null);t.default=s.exports}});