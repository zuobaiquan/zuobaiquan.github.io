webpackJsonp([12],{dEdu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("vMJZ"),i={data:function(){return{dialogVisible2:!1,dialogImageUrl:"",list:null,listLoading:!0,currentPage:1,totalNum:1,searchObj:{pageSize:10,keyword:"",gender:""},editdialogFormVisible:!1,selectTypeOptions:[{id:"male",name:"男"},{id:"female",name:"女"}],form2:{type:0,price:""},rules2:{price:[{required:!0,validator:function(e,t,a){return t?/(^[1-9]{1}[0-9]*$)|(^[0-9]*\.[0-9]{1,2}$)/.test(t)?void a():a(new Error("金额格式不正确")):a(new Error("金额不为空"))},trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"blur"}]},form3:{},detaildialogFormVisible:!1}},created:function(){this.handleFilter()},methods:{handleFilter:function(){this.currentPage=1,String(this.searchObj.gender)||delete this.searchObj.gender,String(this.searchObj.keyword)||delete this.searchObj.keyword,this.fetchData()},fetchData:function(){var e=this;this.listLoading=!0,this.searchObj.pageNo=this.currentPage,Object(r.h)(this.searchObj).then(function(t){e.list=t.data.data.records,e.totalNum=t.data.data.total,e.listLoading=!1})},handlePictureCardPreview:function(e){this.dialogImageUrl=e.avatar,this.dialogVisible2=!0},userOperate:function(e,t){var a=this;-1==t?(this.$refs.form2&&this.$refs.form2.clearValidate(),this.editdialogFormVisible=!0,this.form2=e):0==t&&(Object(r.g)({id:e.id}).then(function(e){a.form3=e.data.data}),this.detaildialogFormVisible=!0)},submitRes:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a="uid="+t.form2.id+"&money="+100*t.form2.price*parseInt(t.form2.type);Object(r.a)(a).then(function(e){200==e.status&&0==e.data.code?(t.$message({message:"修改成功",type:"success"}),t.editdialogFormVisible=!1,t.fetchData()):t.$message({message:e.data.message||"修改失败",type:"warning"})})})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"180px","margin-right":"10px"},attrs:{clearable:"",placeholder:"请输入关键字"},model:{value:e.searchObj.keyword,callback:function(t){e.$set(e.searchObj,"keyword",t)},expression:"searchObj.keyword"}}),e._v(" "),a("span",[e._v("性别：")]),e._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"搜索项"},model:{value:e.searchObj.gender,callback:function(t){e.$set(e.searchObj,"gender",t)},expression:"searchObj.gender"}},e._l(e.selectTypeOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")]),e._v(" "),a("br"),a("br"),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.id)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"用户昵称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.nickname||"--")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"50px",height:"50px",display:"inline-block",cursor:"pointer","vertical-align":"middle","border-radius":"50%"},attrs:{src:t.row.avatar,alt:""},on:{click:function(a){e.handlePictureCardPreview(t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"性别",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("male"==t.row.gender?"男":("female"==t.row.gender?"女":"未知")||"--")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"年龄",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.age||"--")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"绑定手机号",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.phone||"--")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"账户余额/元",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(parseFloat(t.row.balance/100).toFixed(2))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"初始登录时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("parseTime")(t.row.createTime))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.userOperate(t.row,-1)}}},[e._v("编辑余额")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.userOperate(t.row,0)}}},[e._v("查看详情")])]}}])})],1),e._v(" "),e.totalNum/10>1?a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[1,10,20,30],"page-size":10,layout:"total, prev, pager, next, jumper",total:e.totalNum},on:{"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("el-dialog",{staticStyle:{width:"60%",margin:"0 auto"},attrs:{title:"编辑余额",visible:e.editdialogFormVisible},on:{"update:visible":function(t){e.editdialogFormVisible=t}}},[a("el-form",{ref:"form2",attrs:{model:e.form2,rules:e.rules2}},[a("el-form-item",{attrs:{label:""}},[e._v("账户余额："+e._s(parseFloat(e.form2.balance/100).toFixed(2))+"元")]),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"type"}},[a("el-radio-group",{model:{value:e.form2.type,callback:function(t){e.$set(e.form2,"type",t)},expression:"form2.type"}},[a("el-radio",{attrs:{label:1}},[e._v("充值")]),e._v(" "),a("el-radio",{attrs:{label:-1}},[e._v("扣费")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"操作金额：",prop:"price"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入操作金额","auto-complete":"off"},model:{value:e.form2.price,callback:function(t){e.$set(e.form2,"price",t)},expression:"form2.price"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editdialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRes("form2")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticStyle:{width:"100%"},attrs:{title:"用户详情",visible:e.detaildialogFormVisible},on:{"update:visible":function(t){e.detaildialogFormVisible=t}}},[e.form3.user?a("el-form",{ref:"form3",attrs:{model:e.form3}},[a("el-form-item",{attrs:{label:""}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("span",[e._v("头像：")]),e._v(" "),a("img",{staticStyle:{"margin-left":"20px",width:"80px",height:"80px","border-radius":"50%",display:"inline-block","vertical-align":"middle"},attrs:{src:e.form3.user.avatar,alt:""}})]),e._v(" "),a("div",{staticClass:"column-three"},[a("span",{staticClass:"three-item"},[e._v("用户昵称："+e._s(e.form3.user.nickname||"--"))]),e._v(" "),a("span",{staticClass:"three-item"},[e._v("性别："+e._s("male"==e.form3.user.gender?"男":"female"==e.form3.user.gender?"女":""))]),e._v(" "),a("span",{staticClass:"three-item"},[e._v("年龄："+e._s(e.form3.user.age||"--"))])]),e._v(" "),a("div",{staticClass:"column-three"},[a("span",{staticClass:"three-item"},[e._v("绑定手机号："+e._s(e.form3.user.phone||"--"))]),e._v(" "),a("span",{staticClass:"three-item"},[e._v("账户余额："+e._s(parseFloat(e.form3.user.balance/100).toFixed(2)))]),e._v(" "),a("span",{staticClass:"three-item"},[e._v("勋章名称：\n            "),e._l(e.form3.honers,function(t,r){return e.form3.honers.length>0?a("el-tag",{key:r,staticStyle:{"margin-right":"10px"},attrs:{type:"warning"}},[e._v(e._s(t.name))]):e._e()}),e._v(" "),0==e.form3.honers.length?a("span",[e._v("暂无")]):e._e()],2)]),e._v(" "),a("div",{staticClass:"column-three"},[a("span",{staticClass:"three-item"},[e._v("捐单数："+e._s(e.form3.orderCountRecord.donationOrderCount)+"（半小时/单）")]),e._v(" "),a("span",{staticClass:"three-item"},[e._v("放单数："+e._s(e.form3.orderCountRecord.buyOrderCount)+"（半小时/单）")]),e._v(" "),a("span",{staticClass:"three-item"},[e._v("初始登录时间："+e._s(e.form3.user.createTime||"--"))])])])],1):e._e()],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible2},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]},s=a("VU/8")(i,l,!1,null,null,null);t.default=s.exports}});