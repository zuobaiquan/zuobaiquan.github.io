webpackJsonp([13],{"B/0D":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("vMJZ"),i=a("s8Ph"),o={data:function(){return{selectOptions:[],form:{nickName:"",phone:"",intro:"",avatar:"",gender:"unset",danceStyle:{id:""}},rules:{nickName:[{required:!0,message:"昵称不能为空",trigger:"blur"}],phone:[{required:!0,message:"手机号码不能为空",trigger:"blur"}],intro:[{required:!0,message:"介绍不能为空",trigger:"blur"}],avatar:[{required:!0,message:"头像不能为空",trigger:"blur"}],danceStyle:{id:[{required:!0,message:"请选择街舞风格",trigger:"change"}]},gender:[{required:!0,message:"请选择性别",trigger:"blur"}]},baseURL:"http://120.79.163.13:8080/api/oss",edit:this.$route.params.id,flag:this.$route.params.flag,dialogVisible:!1,dialogImageUrl:""}},created:function(){var e=this;-1==this.flag?(Object(r.c)({page:0,size:1,id:this.$route.params.editid}).then(function(t){e.form=t.data.data}),this.$route.meta.title="编辑老师"):this.$route.meta.title="添加老师",Object(i.d)({page:0,size:100}).then(function(t){e.selectOptions=t.data.data.content})},methods:{goBack:function(){this.$router.go(-1)},handlePictureCardPreview:function(e){this.dialogImageUrl=e,this.dialogVisible=!0},handleImageScucess:function(e,t,a){this.form.avatar=e.data},handelErrorForm:function(){return""!=this.form.avatar||(this.$message({message:"请上传活动封面",type:"warning"}),!1)},submitRes:function(e){var t=this;this.$refs[e].validate(function(e){if(!e||!t.handelErrorForm())return console.log("error submit!!"),!1;console.log("submit!"),-1==t.flag?Object(r.b)({id:t.form.id,type:"student",nickName:t.form.nickName,phone:t.form.phone,intro:t.form.intro,avatar:t.form.avatar,gender:t.form.gender,danceStyle:{id:t.form.danceStyle.id}}).then(function(e){200==e.status?(t.$message({message:"修改成功",type:"success"}),t.$router.push({name:"Teacher"})):t.$message({message:"修改失败",type:"warning"})}):Object(r.a)({nickName:t.form.nickName,phone:t.form.phone,intro:t.form.intro,avatar:t.form.avatar,gender:t.form.gender,danceStyle:{id:t.form.danceStyle.id},type:"student"}).then(function(e){200==e.status?(t.$message({message:"添加成功",type:"success"}),t.$router.push({name:"Teacher"})):t.$message({message:"添加失败",type:"warning"})})})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"头像",prop:"nickName"}},[a("div",{staticStyle:{display:"inline-block"}},[a("el-upload",{staticClass:"upload-demo",attrs:{"show-file-list":!1,drag:"","on-success":e.handleImageScucess,action:e.baseURL}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])])],1),e._v(" "),e.form.coverUrl?a("div",{staticStyle:{"margin-left":"20px",display:"inline-block"}},[a("img",{staticStyle:{"max-width":"400px","max-height":"320px",cursor:"pointer","vertical-align":"middle"},attrs:{src:e.form.avatar,alt:""},on:{click:function(t){e.handlePictureCardPreview(e.form.avatar)}}})]):e._e()]),e._v(" "),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"昵称",prop:"nickName"}},[a("el-input",{model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"电话号码",prop:"phone"}},[a("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"街舞风格","label-width":"120px",prop:"danceStyle.id"}},[a("el-select",{staticClass:"filter-item",attrs:{clearable:"",placeholder:"请选择"},model:{value:e.form.danceStyle.id,callback:function(t){e.$set(e.form.danceStyle,"id",t)},expression:"form.danceStyle.id"}},e._l(e.selectOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"介绍",prop:"intro"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},"auto-complete":"off"},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"性别",prop:"gender"}},[a("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[a("el-radio",{attrs:{label:"male"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"female"}},[e._v("女")]),e._v(" "),a("el-radio",{attrs:{label:"unset"}},[e._v("保密")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRes("form")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]},s=a("/Xao")(o,l,!1,null,null,null);t.default=s.exports}});