webpackJsonp([10],{Ap5Q:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("dByW"),r={data:function(){return{form:{id:"",hasActivity:!0,coverUrl:"",sortIndex:"",url:""},baseURL:"http://120.79.163.13:8080/api/oss",dialogVisible:!1,dialogImageUrl:""}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;Object(i.d)({type:"loadingAd"}).then(function(e){t.form=e.data.data[0]})},handleImageScucess:function(t,e,a){this.form.coverUrl=t.data},handlePictureCardPreview:function(t){this.dialogImageUrl=t,this.dialogVisible=!0},submitRes:function(){var t=this;return""==this.form.coverUrl?(this.$message({message:"请上传图片",type:"warning"}),!1):""==this.form.url?(this.$message({message:"链接地址不能为空",type:"warning"}),!1):/^(0|([1-9]\d*))$/.test(this.form.sortIndex)?void Object(i.b)({id:this.form.id,sortIndex:this.form.sortIndex,coverUrl:this.form.coverUrl,url:this.form.url,type:"loadingAd",hasActivity:this.form.hasActivity}).then(function(e){200==e.status&&0==e.data.code?(t.$message({message:"修改成功",type:"success"}),t.fetchData()):t.$message({message:"修改失败",type:"warning"})}):(this.$message({message:"排序格式不正确",type:"warning"}),!1)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container edit-ads"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"广告图片"}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":t.handleImageScucess,action:t.baseURL}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])]),t._v(" "),t.form.coverUrl?a("div",{staticStyle:{"margin-left":"20px",display:"inline-block"}},[a("img",{staticStyle:{"max-width":"400px","max-height":"320px",cursor:"pointer","vertical-align":"middle"},attrs:{src:t.form.coverUrl,alt:""},on:{click:function(e){t.handlePictureCardPreview(t.form.coverUrl)}}})]):t._e()],1),t._v(" "),a("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"链接地址","label-width":"120px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"排序","label-width":"120px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.sortIndex,callback:function(e){t.$set(t.form,"sortIndex",e)},expression:"form.sortIndex"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"启用状态",prop:"status"}},[a("el-radio-group",{model:{value:t.form.hasActivity,callback:function(e){t.$set(t.form,"hasActivity",e)},expression:"form.hasActivity"}},[a("el-radio",{attrs:{label:!0}},[t._v("启用")]),t._v(" "),a("el-radio",{attrs:{label:!1}},[t._v("不启用")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitRes()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]},l=a("/Xao")(r,s,!1,null,null,null);e.default=l.exports},dByW:function(t,e,a){"use strict";e.c=function(t){return Object(s.a)({url:"/api/advert",method:"get",params:t})},e.a=function(t){return Object(s.a)({url:"/api/advert",method:"put",data:r()(t),headers:{"Content-Type":"application/json;charset=utf-8"}})},e.d=function(){return Object(s.a)({url:"/api/banner/all?type=loadingAd",method:"get"})},e.b=function(t){return Object(s.a)({url:"/api/banner/edit",method:"post",data:r()(t),headers:{"Content-Type":"application/json;charset=utf-8"}})};var i=a("3cXf"),r=a.n(i),s=a("vLgD")}});