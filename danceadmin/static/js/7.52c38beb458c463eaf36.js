webpackJsonp([7],{"9NSQ":function(e,t,s){var a=s("RAYm");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("075d14c0",a,!0)},RAYm:function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,"\n.line[data-v-6152dbb4]{\r\n  text-align: center;\n}\n.el-upload-list[data-v-6152dbb4] {\r\n    margin-left: 0 !important;\n}\r\n",""])},Rf88:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("mvHQ"),r=s.n(a),o=s("vLgD");var i={data:function(){return{form:{title:"",content:"",coverUrl:"",linkUrl:""},baseURL:"http://47.106.228.25:8080/api/oss"}},methods:{handleImageScucess:function(e,t,s){this.form.coverUrl=e.data},beforeAvatarUpload:function(e){console.log(e);var t=["image/jpeg","image/gif","image/png"].includes(e.type);return t||this.$message.error("图片格式不正确!"),t},submitRes:function(){var e,t=this;return""==this.form.title?(this.$message({message:"消息标题不能为空",type:"warning"}),!1):""==this.form.content?(this.$message({message:"消息内容不能为空",type:"warning"}),!1):""==this.form.linkUrl?(this.$message({message:"消息链接不能为空",type:"warning"}),!1):/^https?:\/\/(([a-zA-Z0-9_-])+(\.)?)*(:\d+)?(\/((\.)?(\?)?=?&?[a-zA-Z0-9_-](\?)?)*)*$/i.test(this.form.linkUrl)?""==this.form.coverUrl?(this.$message({message:"消息封面不能为空",type:"warning"}),!1):void(e={title:this.form.title,coverUrl:this.form.coverUrl,linkUrl:this.form.linkUrl,content:this.form.content,type:"system"},Object(o.a)({url:"/api/message",method:"post",data:r()(e),headers:{"Content-Type":"application/json;charset=utf-8"}})).then(function(e){200==e.status&&0==e.data.code?(t.$message({message:"添加成功",type:"success"}),t.form.title="",t.form.content="",t.form.coverUrl="",t.form.linkUrl=""):t.$message({message:e.data.message||"添加失败",type:"warning"})}):(this.$message({message:"消息链接格式不正确",type:"warning"}),!1)}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"消息标题"}},[s("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"消息内容"}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},"auto-complete":"off"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"消息链接"}},[s("el-input",{model:{value:e.form.linkUrl,callback:function(t){e.$set(e.form,"linkUrl",t)},expression:"form.linkUrl"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"消息封面"}},[s("el-upload",{staticClass:"upload-demo",attrs:{"before-upload":e.beforeAvatarUpload,"show-file-list":!1,drag:"","on-success":e.handleImageScucess,action:e.baseURL}},[s("i",{staticClass:"el-icon-upload"}),e._v(" "),s("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),s("em",[e._v("点击上传")])])])],1),e._v(" "),e.form.coverUrl?s("div",{staticStyle:{"margin-left":"120px"}},[s("img",{staticStyle:{"max-width":"200px","max-height":"200px"},attrs:{src:e.form.coverUrl,alt:"",width:"80%",height:"80%"}})]):e._e(),e._v(" "),s("el-form-item",{attrs:{label:""}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRes()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var n=s("VU/8")(i,l,!1,function(e){s("9NSQ")},"data-v-6152dbb4",null);t.default=n.exports}});