webpackJsonp([12],{"7GRM":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("dByW"),r={data:function(){return{form:{id:"",coverUrl:""},baseURL:"http://47.106.228.25:8080/api/oss",dialogVisible:!1,dialogImageUrl:""}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;Object(i.c)({page:0,size:10}).then(function(t){t.data&&t.data.data.length>0&&(e.form=t.data.data.content[0])})},handleImageScucess:function(e,t,a){this.form.coverUrl=e.data},beforeAvatarUpload:function(e){console.log(e);var t=["image/jpeg","image/gif","image/png"].includes(e.type);return t||this.$message.error("图片格式不正确!"),t},handlePictureCardPreview:function(e){this.dialogImageUrl=e,this.dialogVisible=!0},submitRes:function(){var e=this;if(""==this.form.coverUrl)return this.$message({message:"请上传图片",type:"warning"}),!1;Object(i.a)({id:this.form.id,coverUrl:this.form.coverUrl}).then(function(t){200==t.status&&0==t.data.code?e.$message({message:"修改成功",type:"success"}):e.$message({message:t.data.message||"修改失败",type:"warning"})})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container edit-ads"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"广告图片"}},[a("el-upload",{staticClass:"upload-demo",attrs:{"before-upload":e.beforeAvatarUpload,drag:"","on-success":e.handleImageScucess,action:e.baseURL}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])]),e._v(" "),e.form.coverUrl?a("div",{staticStyle:{"margin-left":"20px",display:"inline-block"}},[a("img",{staticStyle:{"max-width":"400px","max-height":"320px",cursor:"pointer","vertical-align":"middle"},attrs:{src:e.form.coverUrl,alt:""},on:{click:function(t){e.handlePictureCardPreview(e.form.coverUrl)}}})]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRes()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]},n=a("VU/8")(r,s,!1,null,null,null);t.default=n.exports},dByW:function(e,t,a){"use strict";t.c=function(e){return Object(s.a)({url:"/api/advert",method:"get",params:e})},t.a=function(e){return Object(s.a)({url:"/api/advert",method:"put",data:r()(e),headers:{"Content-Type":"application/json;charset=utf-8"}})},t.d=function(){return Object(s.a)({url:"/api/banner/all?type=loadingAd",method:"get"})},t.b=function(e){return Object(s.a)({url:"/api/banner/edit",method:"post",data:r()(e),headers:{"Content-Type":"application/json;charset=utf-8"}})};var i=a("mvHQ"),r=a.n(i),s=a("vLgD")}});