webpackJsonp([5],{"53wh":function(t,e,s){var a=s("RKlK");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s("8bSs")("6befc581",a,!0)},RKlK:function(t,e,s){(t.exports=s("BkJT")(!1)).push([t.i,"\n.line[data-v-7c1fb849]{\r\n  text-align: center;\n}\n.el-upload-list[data-v-7c1fb849] {\r\n    margin-left: 0 !important;\n}\r\n",""])},Rf88:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("3cXf"),r=s.n(a),l=s("vLgD");var i={data:function(){return{form:{title:"",content:"",coverUrl:"",linkUrl:""},baseURL:"http://120.79.163.13:8080/api/oss"}},methods:{handleImageScucess:function(t,e,s){this.form.coverUrl=t.data},submitRes:function(){var t,e=this;return""==this.form.title?(this.$message({message:"消息标题不能为空",type:"warning"}),!1):""==this.form.content?(this.$message({message:"消息内容不能为空",type:"warning"}),!1):""==this.form.linkUrl?(this.$message({message:"消息链接不能为空",type:"warning"}),!1):/^https?:\/\/(([a-zA-Z0-9_-])+(\.)?)*(:\d+)?(\/((\.)?(\?)?=?&?[a-zA-Z0-9_-](\?)?)*)*$/i.test(this.form.linkUrl)?""==this.form.coverUrl?(this.$message({message:"消息封面不能为空",type:"warning"}),!1):void(t={title:this.form.title,coverUrl:this.form.coverUrl,linkUrl:this.form.linkUrl,content:this.form.content,type:"system"},Object(l.a)({url:"/api/message",method:"post",data:r()(t),headers:{"Content-Type":"application/json;charset=utf-8"}})).then(function(t){200==t.status?(e.$message({message:"添加成功",type:"success"}),e.form.title="",e.form.content="",e.form.coverUrl="",e.form.linkUrl=""):e.$message({message:"添加失败",type:"warning"})}):(this.$message({message:"消息链接格式不正确",type:"warning"}),!1)}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container"},[s("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"消息标题"}},[s("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"消息内容"}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},"auto-complete":"off"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"消息链接"}},[s("el-input",{model:{value:t.form.linkUrl,callback:function(e){t.$set(t.form,"linkUrl",e)},expression:"form.linkUrl"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"消息封面"}},[s("el-upload",{staticClass:"upload-demo",attrs:{"show-file-list":!1,drag:"","on-success":t.handleImageScucess,action:t.baseURL}},[s("i",{staticClass:"el-icon-upload"}),t._v(" "),s("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),s("em",[t._v("点击上传")])])])],1),t._v(" "),t.form.coverUrl?s("div",{staticStyle:{"margin-left":"120px"}},[s("img",{staticStyle:{"max-width":"200px","max-height":"200px"},attrs:{src:t.form.coverUrl,alt:"",width:"80%",height:"80%"}})]):t._e(),t._v(" "),s("el-form-item",{attrs:{label:""}},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitRes()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=s("/Xao")(i,n,!1,function(t){s("53wh")},"data-v-7c1fb849",null);e.default=o.exports}});