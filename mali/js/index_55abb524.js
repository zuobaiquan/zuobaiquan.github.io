"use strict";$(function(){function i(i){tool.ajax("machine:machine",i,function(i){var t="";$(".product-list").children("li").remove();var e=i.data.content;if(e.length>0)for(var a=0;a<e.length;a++)t+='<li>\n            <img src="'+e[a].images[0]+'" alt="">\n            <p class="product-title">'+e[a].title+'</p>\n            <p class="product-price">￥'+e[a].price+'</p>\n            <p class="product-addr">'+e[a].province.name+"&nbsp;"+e[a].city.name+"&nbsp;"+e[a].district.name+'</p>\n            <a class="product-advisory" href="indexdetail.html?id='+e[a].id+'">预定/购买</a>\n          </li>';if($.jqPaginator){if(i.data.totalPages<n)return;$.jqPaginator("#indexPagination",{totalPages:i.data.totalPages,visiblePages:5,currentPage:n,prev:'<li class="prev"><a href="index.html?p='+(n-1)+'">上一页</a></li>',next:'<li class="next"><a href="index.html?p='+(n+1)+'">下一页</a></li>',page:'<li class="page"><a href="#">{{page}}</a></li>',onPageChange:function(){$("#indexPagination .page").each(function(){var i=+$(this).find("a").text();$(this).find("a").attr("href","index.html?p="+i)})}})}$(".product-list").append(t)})}function t(i,t){t.children("li:not(.not-remove)").remove(),tool.ajax("area:areas/"+i+"/subList",{},function(i){var e="",a=i.data.content;if(a.length>0)for(var n=i.data.content,s=0;s<n.length;s++)e+='<li data-id="'+n[s].id+'" data-name="'+n[s].name+'">'+n[s].name+"</li>";else e="暂无数据";t.append(e)})}$(".banner-right li:eq(0)").addClass("active").siblings().removeClass("active");var e,a,n=+tool.getUrlParam("p")||1,s={};e=new AMap.Map("container",{resizeEnable:!0}),e.plugin("AMap.Geolocation",function(){a=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"}),e.addControl(a),a.getCurrentPosition(),AMap.event.addListener(a,"complete",function(t){s={page:n-1,size:9,clientLon:t.position.lng,clientLat:t.position.lat,projection:"withRegion"},i(s)}),AMap.event.addListener(a,"error",function(){s={page:n-1,size:9,projection:"withRegion"},i(s)})}),$(".arrow-down").click(function(){$(this).toggleClass("arrow-up"),$(".condition-list.list-brand .list-boxs").toggleClass("show-allboxs")}),tool.ajax("ad:banners",{status:!0,page:0,size:100,position:"NEWS"},function(i){for(var t=i.data.content,e="",a="",n=0;n<t.length;n++)e+='<li>\n        <a target="_blank" href="'+t[n].link+'">\n          <img src="'+t[n].imageFull+'" alt="'+t[n].title+'">\n        </a>\n      </li>',a+=0==n?'<li class="on"></li>':"<li></li>";$(".banner-box").append(e),$(".dot-list").append(a),jQuery(".index").slide&&jQuery(".index").slide({mainCell:".banner-box",titCell:".dot-list li",effect:"fold",autoPlay:!0,delayTime:1e3})}),$(".distribute-text").click(function(){$(".distribute-list").toggle()}),t(0,$(".distribute-provice")),$(".distribute-provice").on("click","li",function(){$(".distribute-tab li").eq(1).addClass("active").siblings().removeClass("active"),$(".distribute-content").eq(1).show().siblings(".distribute-content").hide(),$(this).addClass("active").siblings().removeClass("active"),s.provinceId=$(this).data("id"),$(".distribute-text span").text($(this).data("name")),i(s),s.provinceId&&t(s.provinceId,$(".distribute-city"))}),$(".distribute-city").on("click","li",function(){$(".distribute-tab li").eq(2).addClass("active").siblings().removeClass("active"),$(".distribute-content").eq(2).show().siblings(".distribute-content").hide(),$(this).addClass("active").siblings().removeClass("active"),s.cityId=$(this).data("id"),$(".distribute-text span").text($(this).data("name")),i(s),s.provinceId&&t(s.cityId,$(".distribute-area"))}),$(".distribute-area").on("click","li",function(){$(this).addClass("active").siblings().removeClass("active"),$(".distribute-text span").text($(this).data("name")),s.districtId=$(this).data("id"),i(s),$(".distribute-list").hide()}),tool.ajax("news:news",{page:0,size:1,position:1},function(i){var t="",e=i.data.content;if(e.length>0){var a=i.data.content[0];t='<img class="fl" src="'+a.imageFull+'" alt="">\n        <div class="fr new-content">\n          <p class="content-tit">'+a.title+'</p>\n          <div class="content">'+a.summary+'<a class="content-detail" href="indexnewsdetail.html?t=1&id='+a.id+'">[详细信息]</a></div>\n          <div class="pub-time"><i class="time-icon"></i>发布时间&nbsp;&nbsp;'+tool.getDate(a.createTime)+'</div>\n        </div><a class="newslist-more" href="indexnews.html?t=1">查看更多</a>'}else t="暂无数据";$(".news-box1").append(t)}),tool.ajax("news:news",{page:0,size:1,position:2},function(i){var t="",e=i.data.content;if(e.length>0){var a=i.data.content[0];t='<img class="fl" src="'+a.imageFull+'" alt="">\n        <div class="fr new-content">\n          <p class="content-tit">'+a.title+'</p>\n          <div class="content">'+a.summary+'<a class="content-detail" href="indexnewsdetail.html?t=2&id='+a.id+'">[详细信息]</a></div>\n          <div class="pub-time"><i class="time-icon"></i>发布时间&nbsp;&nbsp;'+tool.getDate(a.createTime)+'</div>\n        </div><a class="newslist-more" href="indexnews.html?t=2">查看更多</a>'}else t="暂无数据";$(".news-box2").append(t)}),$(".content-tab li").click(function(){var i=$(this).index();$(this).addClass("active").siblings().removeClass("active"),$(".news-box").eq(i).show().siblings(".news-box").hide()}),$(".distribute-list .distribute-tab li").click(function(){var i=$(this).index();$(this).addClass("active").siblings().removeClass("active"),$(".distribute-content").eq(i).show().siblings(".distribute-content").hide()}),tool.ajax("machine:brand",{page:0,size:200},function(t){for(var e=t.data.content,a="",n=0;n<e.length;n++)a+='<li data-id="'+e[n].id+'">'+e[n].name+"</li>";$(".list-brand .list-boxs").append(a),$(".list-brand .list-boxs li").click(function(){$(this).addClass("active").siblings().removeClass("active"),s.brandId=$(this).data("id"),i(s)})}),tool.ajax("machine:horsepower-section",{page:0,size:200},function(t){for(var e=t.data.content,a="",n=0;n<e.length;n++)a+='<li data-id="'+e[n].id+'">'+e[n].name+"</li>";$(".horsepower-condition .list-boxs").append(a),$(".horsepower-condition .list-boxs li").click(function(){$(this).addClass("active").siblings().removeClass("active"),s.horsepowerSectionId=$(this).data("id"),i(s)})}),tool.ajax("machine:usedtime-section",{page:0,size:200},function(t){for(var e=t.data.content,a="",n=0;n<e.length;n++)a+='<li data-id="'+e[n].id+'">'+e[n].name+"</li>";$(".time-condition .list-boxs").append(a),$(".time-condition .list-boxs li").click(function(){$(this).addClass("active").siblings().removeClass("active"),s.usedTimeSectionId=$(this).data("id"),i(s)})}),tool.ajax("machine:price-section",{page:0,size:200},function(t){for(var e=t.data.content,a="",n=0;n<e.length;n++)a+='<li data-id="'+e[n].id+'">'+e[n].name+"</li>";$(".price-condition .list-boxs").append(a),$(".price-condition .list-boxs li").click(function(){$(this).addClass("active").siblings().removeClass("active"),s.priceSectionId=$(this).data("id"),i(s)})})});