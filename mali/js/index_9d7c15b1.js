"use strict";$(function(){function i(i){$.cookie("provinceId")&&-1!==parseInt($.cookie("provinceId"))?i.provinceId=parseInt($.cookie("provinceId")):delete i.provinceId,$.cookie("cityId")&&-1!==parseInt($.cookie("cityId"))?i.cityId=parseInt($.cookie("cityId")):delete i.cityId,$.cookie("districtId")&&-1!==parseInt($.cookie("districtId"))?i.districtId=parseInt($.cookie("districtId")):delete i.districtId,1==n?(i.systemStatus=1,$(".banner-right li:eq(3)").addClass("active").siblings().removeClass("active")):(delete i.systemStatus,$(".banner-right li:eq(0)").addClass("active").siblings().removeClass("active")),tool.ajax("machine:machine",i,function(i){var e="";$(".product-list").children("li").remove();var t=i.data.content;if(t.length>0)for(var s=0;s<t.length;s++)e+='<li>\n            <img src="'+t[s].images[0]+'" alt="">\n            <p class="product-title">'+t[s].title+'</p>\n            <p class="product-price">￥'+t[s].price+'</p>\n            <p class="product-addr">'+t[s].province.name+"&nbsp;"+t[s].city.name+"&nbsp;"+t[s].district.name+'</p>\n            <a class="product-advisory" href="indexdetail.html?id='+t[s].id+"&s="+n+'">预定/购买</a>\n          </li>';if($.jqPaginator){if(i.data.totalPages<a)return;$.jqPaginator("#indexPagination",{totalPages:i.data.totalPages,visiblePages:5,currentPage:a,prev:'<li class="prev"><a href="index.html?p='+(a-1)+"&s="+n+'">上一页</a></li>',next:'<li class="next"><a href="index.html?p='+(a+1)+"&s="+n+'">下一页</a></li>',page:'<li class="page"><a href="#">{{page}}</a></li>',onPageChange:function(){$("#indexPagination .page").each(function(){var i=+$(this).find("a").text();$(this).find("a").attr("href","index.html?p="+i+"&s="+n)})}})}$(".product-list").append(e)})}function e(i,e){e.children("li:not(.not-remove)").remove(),tool.ajax("area:areas/"+i+"/subList",{},function(i){var t="",s=i.data.content;if(s.length>0)for(var a=i.data.content,n=0;n<a.length;n++)t+='<li data-id="'+a[n].id+'" data-name="'+a[n].name+'">'+a[n].name+"</li>";else t="暂无数据";e.append(t)})}var t,s,a=+tool.getUrlParam("p")||1,n=+tool.getUrlParam("s")||-1,o={};t=new AMap.Map("container",{resizeEnable:!0}),t.plugin("AMap.Geolocation",function(){s=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"}),t.addControl(s),s.getCurrentPosition(),AMap.event.addListener(s,"complete",function(e){o={page:a-1,size:9,clientLon:e.position.lng,clientLat:e.position.lat,projection:"withRegion"},i(o)}),AMap.event.addListener(s,"error",function(){o={page:a-1,size:9,projection:"withRegion"},i(o)})}),$(".arrow-down").click(function(){$(this).toggleClass("arrow-up"),$(".condition-list.list-brand .list-boxs").toggleClass("show-allboxs")}),tool.ajax("ad:banners",{status:!0,page:0,size:100,position:"NEWS"},function(i){for(var e=i.data.content,t="",s="",a=0;a<e.length;a++)t+='<li>\n        <a target="_blank" href="'+e[a].link+'">\n          <img src="'+e[a].imageFull+'" alt="'+e[a].title+'">\n        </a>\n      </li>',s+=0==a?'<li class="on"></li>':"<li></li>";$(".banner-box").append(t),$(".dot-list").append(s),jQuery(".index").slide&&jQuery(".index").slide({mainCell:".banner-box",titCell:".dot-list li",effect:"fold",autoPlay:!0,delayTime:1e3})}),$(".distribute-text").click(function(){$(".distribute-list").toggle()}),e(0,$(".distribute-provice")),$(".distribute-provice").on("click","li",function(){if($(".distribute-tab li").eq(1).addClass("active").siblings().removeClass("active"),$(".distribute-content").eq(1).show().siblings(".distribute-content").hide(),$(this).addClass("active").siblings().removeClass("active"),$(this).hasClass("not-remove"))$.cookie("districtName","全国",{expires:7}),$(".distribute-text span").text("全国"),$(".distribute-city").children("li:not(.not-remove)").remove(),$(".distribute-area").children("li:not(.not-remove)").remove(),$.cookie("provinceId",-1,{expires:7}),$.cookie("cityId",-1,{expires:7}),$.cookie("districtId",-1,{expires:7});else{var t=$(this).data("id"),s=$(this).data("name");$.cookie("provinceId",t,{expires:7}),$.cookie("districtName",s,{expires:7}),o.provinceId=t,$(".distribute-text span").text(s),o.provinceId&&e(o.provinceId,$(".distribute-city"))}i(o)}),$(".distribute-city").on("click","li",function(){if($(".distribute-tab li").eq(2).addClass("active").siblings().removeClass("active"),$(".distribute-content").eq(2).show().siblings(".distribute-content").hide(),$(this).addClass("active").siblings().removeClass("active"),$(this).hasClass("not-remove"))$.cookie("districtName","全国",{expires:7}),$(".distribute-text span").text("全国"),$(".distribute-area").children("li:not(.not-remove)").remove(),$(".distribute-provice").children("li").removeClass("active"),$.cookie("provinceId",-1,{expires:7}),$.cookie("cityId",-1,{expires:7}),$.cookie("districtId",-1,{expires:7});else{var t=$(this).data("id"),s=$(this).data("name");$.cookie("cityId",t,{expires:7}),$.cookie("districtName",s,{expires:7}),o.cityId=t,$(".distribute-text span").text(s),o.provinceId&&e(o.cityId,$(".distribute-area"))}i(o)}),$(".distribute-area").on("click","li",function(){if($(this).addClass("active").siblings().removeClass("active"),$(this).hasClass("not-remove"))$.cookie("districtName","全国",{expires:7}),$(".distribute-text span").text("全国"),$(".distribute-provice").children("li").removeClass("active"),$(".distribute-city").children("li").removeClass("active"),$(".distribute-list").hide(),$.cookie("provinceId",-1,{expires:7}),$.cookie("cityId",-1,{expires:7}),$.cookie("districtId",-1,{expires:7});else{var e=$(this).data("id"),t=$(this).data("name");$.cookie("districtId",e,{expires:7}),$.cookie("districtName",t,{expires:7}),$(".distribute-text span").text(t),o.districtId=e,$(".distribute-list").hide()}i(o)}),tool.ajax("news:news",{page:0,size:1,position:1},function(i){var e="",t=i.data.content;if(t.length>0){var s=i.data.content[0];e='<img class="fl" src="'+s.imageFull+'" alt="">\n        <div class="fr new-content">\n          <p class="content-tit">'+s.title+'</p>\n          <div class="content">'+s.summary+'<a class="content-detail" href="indexnewsdetail.html?t=1&id='+s.id+"&s="+n+'">[详细信息]</a></div>\n          <div class="pub-time"><i class="time-icon"></i>发布时间&nbsp;&nbsp;'+tool.getDate(s.createTime)+'</div>\n        </div><a class="newslist-more" href="indexnews.html?t=1&s='+n+'">查看更多</a>'}else e="暂无数据";$(".news-box1").append(e)}),tool.ajax("news:news",{page:0,size:1,position:2},function(i){var e="",t=i.data.content;if(t.length>0){var s=i.data.content[0];e='<img class="fl" src="'+s.imageFull+'" alt="">\n        <div class="fr new-content">\n          <p class="content-tit">'+s.title+'</p>\n          <div class="content">'+s.summary+'<a class="content-detail" href="indexnewsdetail.html?t=2&id='+s.id+"&s="+n+'">[详细信息]</a></div>\n          <div class="pub-time"><i class="time-icon"></i>发布时间&nbsp;&nbsp;'+tool.getDate(s.createTime)+'</div>\n        </div><a class="newslist-more" href="indexnews.html?t=2&s='+n+'">查看更多</a>'}else e="暂无数据";$(".news-box2").append(e)}),$(".content-tab li").click(function(){var i=$(this).index();$(this).addClass("active").siblings().removeClass("active"),$(".news-box").eq(i).show().siblings(".news-box").hide()}),$(".distribute-list .distribute-tab li").click(function(){var i=$(this).index();$(this).addClass("active").siblings().removeClass("active"),$(".distribute-content").eq(i).show().siblings(".distribute-content").hide()}),tool.ajax("machine:brand",{page:0,size:200},function(e){for(var t=e.data.content,s="",a=0;a<t.length;a++)s+='<li data-id="'+t[a].id+'">'+t[a].name+"</li>";$(".list-brand .list-boxs").append(s),$(".list-brand .list-boxs li").click(function(){$(this).addClass("active").siblings().removeClass("active"),o.brandId=$(this).data("id"),i(o)})}),tool.ajax("machine:horsepower-section",{page:0,size:200},function(e){for(var t=e.data.content,s="",a=0;a<t.length;a++)s+='<li data-id="'+t[a].id+'">'+t[a].name+"</li>";$(".horsepower-condition .list-boxs").append(s),$(".horsepower-condition .list-boxs li").click(function(){$(this).addClass("active").siblings().removeClass("active"),o.horsepowerSectionId=$(this).data("id"),i(o)})}),tool.ajax("machine:usedtime-section",{page:0,size:200},function(e){for(var t=e.data.content,s="",a=0;a<t.length;a++)s+='<li data-id="'+t[a].id+'">'+t[a].name+"</li>";$(".time-condition .list-boxs").append(s),$(".time-condition .list-boxs li").click(function(){$(this).addClass("active").siblings().removeClass("active"),o.usedTimeSectionId=$(this).data("id"),i(o)})}),tool.ajax("machine:price-section",{page:0,size:200},function(e){for(var t=e.data.content,s="",a=0;a<t.length;a++)s+='<li data-id="'+t[a].id+'">'+t[a].name+"</li>";$(".price-condition .list-boxs").append(s),$(".price-condition .list-boxs li").click(function(){$(this).addClass("active").siblings().removeClass("active"),o.priceSectionId=$(this).data("id"),i(o)})})});