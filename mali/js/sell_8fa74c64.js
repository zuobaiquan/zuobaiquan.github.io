"use strict";$(function(){function e(e,i){i.children("option:not(.not-remove)").remove(),tool.ajax("area:areas/"+e+"/subList",{},function(e){var t="",n=e.data.content;if(n.length>0)for(var o=e.data.content,a=0;a<o.length;a++)t+='<option data-id="'+o[a].id+'" value="'+o[a].name+'">'+o[a].name+"</option>";else t="暂无数据";i.append(t)})}function i(e,i,t){setTimeout(function(){i.show()},100),t||tool.ajax(e,{},function(e){var t="",n=e.data.content;if(n.length>0)for(var o=e.data.content,a=0;a<o.length;a++)t+='<li data-id="'+o[a].id+'" data-name="'+o[a].name+'">'+o[a].name+"</li>";else t="暂无数据";i.append(t)})}$(".banner-right li:eq(1)").addClass("active").siblings().removeClass("active");var t,n,o=!1,a=!1,s=!1,c=!1,r={},d={};t=new AMap.Map("container",{resizeEnable:!0}),t.plugin("AMap.Geolocation",function(){n=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"}),t.addControl(n),n.getCurrentPosition(),AMap.event.addListener(n,"complete",function(e){r={lon:e.position.lng,lat:e.position.lat}})}),e(0,$("#province10")),$("#province10").change(function(){$("#district10").children("option:not(.not-remove)").remove();var i=$(this).children("option:selected").data("id");r.provinceId=i,i?e(i,$("#city10")):$("#city10").children("option:not(.not-remove)").remove()}),$("#city10").change(function(){var i=$(this).children("option:selected").data("id");r.cityId=i,i?e(i,$("#district10")):$("#district10").children("option:not(.not-remove)").remove()}),$("#district10").change(function(){var e=$(this).children("option:selected").data("id");r.districtId=e}),$(".chosen-pinglei input").focus(function(){i("machine:category/children/0",$(".chosen-pinglei .item-box"),o),o=!0}),$(".chosen-pinglei .item-box").on("click","li",function(){var e=$(this).data("id");r.categoryId=e;var i=$(this).data("name");$(this).parent(".item-box").siblings("input").val(i),$(this).parent().hide()}),$(".chosen-brand input").focus(function(){i("machine:brand?page=0&size=100",$(".chosen-brand .item-box"),a),a=!0}),$(".chosen-brand .item-box").on("click","li",function(){var e=$(this).data("id");r.brandId=e;var i=$(this).data("name");$(this).parent(".item-box").siblings("input").val(i),$(this).parent().hide()}),$(".chosen-horsepower input").focus(function(){i("machine:horsepower-section?page=0&size=100",$(".chosen-horsepower .item-box"),s),s=!0}),$(".chosen-horsepower .item-box").on("click","li",function(){var e=$(this).data("id");r.horsepower=e;var i=$(this).data("name");$(this).parent(".item-box").siblings("input").val(i),$(this).parent().hide()}),$(".chosen-time input").focus(function(){i("machine:usedtime-section?page=0&size=100",$(".chosen-time .item-box"),c),c=!0}),$(".chosen-time .item-box").on("click","li",function(){var e=$(this).data("id");r.usedTime=e;var i=$(this).data("name");$(this).parent(".item-box").siblings("input").val(i),$(this).parent().hide()}),$(".close-form,.my-know").click(function(){$(".form-tipxbox,.mask").hide()}),$(".sell-btn").click(function(){r.boughtTime=$(".buy-time").val()+" 00:00:00",r.description=$(".address-detail").val(),r.price=$(".price-input").val(),d.phone=$(".input-phone").val();for(var e=[{name:"categoryId",tips:"请选择农机品类"},{name:"brandId",tips:"请选择品牌型号"},{name:"horsepower",tips:"请选择配套动力"},{name:"boughtTime",tips:"请填写购买时间"},{name:"usedTime",tips:"请选择行驶时间"},{name:"price",tips:"请填写转让价格"},{name:"description",tips:"请输入农机的具体描述"},{name:"provinceId",tips:"请选择省份"},{name:"cityId",tips:"请选择市级"},{name:"districtId",tips:"请选择县区"},{name:"phone",tips:"请填写手机号码"}],i=0;i<e.length;i++)if(!r[e[i].name])return $(".error-tipsbox div").text(e[i].tips),void $(".form-tipxbox,.mask").show();d.userId=2074}),$("#uploadPic1").change(function(){var e=new FormData;e.append("files",$("#uploadPic1").prop("files")[0]),e.append("userId",2074),$.ajax({type:"post",url:rootApi+"vendor:oss/files",data:e,processData:!1,contentType:!1,dataType:"json",success:function(e){console.log("success",e),0==e.code&&r.images.push(rootUpload+e.data.content[0])},error:function(e){console.log("error",e)}})})});