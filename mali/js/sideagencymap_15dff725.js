"use strict";$(function(){function t(t,e,a){this._point=t,this._text=e.name,this._child=e.id,this._number=e.number,this._areaFlag=a}$(".banner-right li:eq(4)").addClass("active").siblings().removeClass("active");var e={level:1,provinceId:null,cityId:null,districtId:null},a=new BMap.Map("allmap"),n=new BMap.Point(116,33);a.enableScrollWheelZoom(),a.centerAndZoom(n,5),t.prototype=new BMap.Overlay,t.prototype.initialize=function(a){var n=this;this._map=a;var i=this._div=document.createElement("div");i.style.zIndex=BMap.Overlay.getZIndex(this._point.lat),i.setAttribute("data-id",this._child),i.setAttribute("class","map-circle"),i.setAttribute("data-lng",this._point.lng),i.setAttribute("data-lat",this._point.lat);var l=this._span=document.createElement("p");l.setAttribute("class","map-areaname"),i.appendChild(l),l.appendChild(document.createTextNode(this._text));var r=this._span=document.createElement("p");return r.setAttribute("class","map-areanumber"),i.appendChild(r),r.appendChild(document.createTextNode(this._number+"ä¸ª")),i.onmouseover=function(){this.style.zIndex=9999},i.onmouseout=function(){this.style.zIndex=BMap.Overlay.getZIndex(n._point.lat)},i.onclick=function(){var n=parseInt(i.getAttribute("data-id")),l=parseInt(i.getAttribute("data-lng")),r=parseInt(i.getAttribute("data-lat"));2==e.level&&(e.provinceId=n),3==e.level&&(e.cityId=n),tool.ajax("area:areas/"+n+"/subList",{},function(n){a.clearOverlays();var i=new BMap.Point(l,r);a.enableScrollWheelZoom(),a.centerAndZoom(i,2==e.level?8:10);for(var o=function(n,i){2==e.level&&(e.cityId=i[n].id),3==e.level&&(e.districtId=i[n].id),tool.ajax("dealer:dealers",e,function(l){i[n].number=l.data.content.length&&l.data.totalElements,e.level=3;var r=new t(new BMap.Point(i[n].lng,i[n].lat),i[n],e);a.addOverlay(r)})},d=0,s=n.data.content;d<s.length;d++)o(d,s)})},a.getPanes().labelPane.appendChild(i),i},t.prototype.draw=function(){var t=this._map,e=t.pointToOverlayPixel(this._point);this._div.style.left=e.x+"px",this._div.style.top=e.y+"px"},tool.ajax("area:areas/0/subList",{},function(n){for(var i=n.data.content,l=function(n){var l=i[n];tool.ajax("dealer:dealers",{provinceId:l.id},function(n){l.number=n.data.content.length&&n.data.totalElements,e.level=2;var i=new t(new BMap.Point(l.lng,l.lat),l,e);a.addOverlay(i)})},r=0;r<i.length;r++)l(r)})});