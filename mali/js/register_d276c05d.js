"use strict";$(function(){var i={};$(".yzm-box").click(function(){if(""==$(".phone-text").val())return $("#phoneTips").find("span").text("手机号不为空"),void $("#phoneTips").show().find("i").attr("class","right-icon error-icon");if(!/^[1][3,4,5,7,8][0-9]{9}$/.test($(".phone-text").val()))return $("#phoneTips").find("span").text("格式错误"),void $("#phoneTips").show().find("i").attr("class","right-icon error-icon");$("#phoneTips").find("span").text(""),$("#phoneTips").show().find("i").attr("class","right-icon");var s={receiveTarget:$(".phone-text").val(),type:0};tool.ajax2("communicate:verify-code",s,function(s){0==s.code?(i=s.data,$("#yzmTips").find("span").text("发送成功"),$("#yzmTips").show().find("i").attr("class","right-icon")):($("#yzmTips").find("span").text("稍后重试"),$("#yzmTips").show().find("i").attr("class","right-icon error-icon"))})}),$(".reg-btn").click(function(){if(""==$(".phone-text").val())return $("#phoneTips").show().find("i").attr("class","right-icon error-icon"),void $("#phoneTips").find("span").text("手机号不为空");if(!/^[1][3,4,5,7,8][0-9]{9}$/.test($(".phone-text").val()))return $("#phoneTips").show().find("i").attr("class","right-icon error-icon"),void $("#phoneTips").find("span").text("格式错误");if($("#phoneTips").show().find("i").attr("class","right-icon"),$("#phoneTips").find("span").text(""),""==$(".yzm-text").val())return $("#yzmTips").show().find("i").attr("class","right-icon error-icon"),void $("#yzmTips").find("span").text("验证码不为空");if(!/^[0-9]{6}$/.test($(".yzm-text").val()))return $("#yzmTips").show().find("i").attr("class","right-icon error-icon"),void $("#yzmTips").find("span").text("验证码错误");if($("#yzmTips").show().find("i").attr("class","right-icon"),$("#yzmTips").find("span").text("格式正确"),""==$(".input-pass").val())return $("#passTips").show().find("i").attr("class","right-icon error-icon"),void $("#passTips").find("span").text("密码不为空");if($(".input-pass").val().length<6||$(".input-pass").val().length>15)return $("#passTips").show().find("i").attr("class","right-icon error-icon"),void $("#passTips").find("span").text("密码格式错误");if($("#passTips").find("span").text(""),$("#passTips").show().find("i").attr("class","right-icon"),""==$(".input-repass").val())return $("#repassTips").show().find("i").attr("class","right-icon error-icon"),void $("#repassTips").find("span").text("输入不为空");if($(".input-pass").val()!==$(".input-repass").val())return $("#repassTips").show().find("i").attr("class","right-icon error-icon"),void $("#repassTips").find("span").text("输入不一致");if($("#repassTips").show().find("i").attr("class","right-icon"),$("#repassTips").find("span").text(""),"{}"==JSON.stringify(i))return $("#regTips").show().find("i").attr("class","right-icon error-icon"),void $("#regTips").find("span").text("请先获取验证码");var s={userApiPost:{mobile:$(".phone-text").val(),password:$(".input-pass").val()},userVerifyCodeApi:{code:$(".yzm-text").val(),id:i.id,receiveTarget:i.receiveTarget}};tool.ajax2("user:users",s,function(i){0==i.code?($("#regTips").find("span").text("注册成功"),$("#regTips").show().find("i").attr("class","right-icon"),window.setTimeout(function(){window.location.href="login.html"},1500)):($("#regTips").find("span").text(i.msg),$("#regTips").show().find("i").attr("class","right-icon error-icon"))},"post")})});