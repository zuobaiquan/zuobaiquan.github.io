"use strict";$(function(){$(".header-banner .loginreg-tit").text("用户登录"),$(".login-btn").click(function(){return""==$(".phone-input").val()?($("#loginTips").show().find("i").attr("class","right-icon error-icon"),void $("#loginTips").find("span").text("账号不为空")):""==$(".pass-input").val()?($("#loginTips").show().find("i").attr("class","right-icon error-icon"),void $("#loginTips").find("span").text("密码不为空")):void tool.ajax("user:users/mobile",{mobile:$(".phone-input").val()},function(i){if(0!=i.code||!i.hasOwnProperty("data"))return 0==i.code&&""==i.msg?($("#loginTips").show().find("i").attr("class","right-icon error-icon"),void $("#loginTips").find("span").text("此号码未注册")):($("#loginTips").show().find("i").attr("class","right-icon error-icon"),void $("#loginTips").find("span").text("稍后重试"));"Bearer "+i.data.userName;$.ajax({type:"post",url:rootApi+"oauth/token",data:JSON.stringify({grant_type:"password",username:$(".phone-input").val(),password:$(".pass-input").val()}),headers:{Authorization:"Basic YXBpOnNlY3JldA==","Content-Type":"application/x-www-form-urlencoded"},success:function(i){0==i.code},error:function(i){console.log(i.responseText)}})})})});