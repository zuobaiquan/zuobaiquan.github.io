"use strict";$(function(){function i(i){tool.ajax("machine:machine/"+i.id,i,function(i){var e="",t=i.data;$(".indexdetail-tit").append('<i class="map"></i>当前位置：首页>买农机>'+t.brand.name+t.code+">"+t.title);var n=t.images;if(n.length>0){for(var a=0;a<n.length;a++)e+='<li><a href="javascript:;"><img src="'+n[a]+'" /></a></li>';$(".slideBox ul").append(e),$(".order-imgbox").append('<span class="order-no">机源号：'+t.code+'</span>\n      <img class="order-bigimg" src="'+n[0]+'" alt="图片">'),$(".goods-tit").text(""+t.title),$(".goods-price").html("销售价：<span>￥"+t.price+"</span>"),$(".goods-info .goods-num").text("库存:"+t.amount),$(".goods-info .goods-code").text("车源码："+t.code),$(".goods-info .goods-time").text("发布时间："+tool.getDate2(t.createTime,"/")),t.service?($(".service-tit").text("选择服务套餐： "),$(".service-list").append((t.service.basicBtnTxt?"<li>"+t.service.basicBtnTxt+"<i></i></li>":"")+"\n          "+(t.service.basicDescription?"<li>"+t.service.basicDescription+"<i></i></li>":"")+"\n          "+(t.service.warrantyDescription?"<li>"+t.service.warrantyDescription+"<i></i></li>":"")+"\n          "+(t.service.warrantyBtnTxt?"<li>"+t.service.warrantyBtnTxt+"<i></i></li>":"")+"\n          "+(t.service.warrantyDetails?"<li>"+t.service.warrantyDetails+"<i></i></li>":"")),$(".service-list li").click(function(){$(this).toggleClass("active")})):$(".service-tit").text("无服务套餐"),$("#detailSlideBox li a").click(function(){$(this).parent("li").addClass("active").siblings("li").removeClass("active");var i=$(this).children("img").attr("src");$(".order-bigimg").attr("src",i)})}$(".detail-item").append("<li>地区："+t.province.name+"&nbsp;"+t.city.name+"&nbsp;"+t.district.name+"</li>\n      <li>品牌："+t.brand.name+"</li>\n      <li>型号："+t.model.name+"</li>\n      <li>配套动力："+t.horsepowerSection.name+"</li>\n      <li>使用时间："+(t.usedTime?t.usedTime+"年":"不详")+"</li>"),$(".detail-content").html(""+(t.description||"暂无"))})}var e=+tool.getUrlParam("id")||1,t=+tool.getUrlParam("s")||-1;1==t?$(".banner-right li:eq(3)").addClass("active").siblings().removeClass("active"):$(".banner-right li:eq(0)").addClass("active").siblings().removeClass("active");var n,a,o={};n=new AMap.Map("container",{resizeEnable:!0}),n.plugin("AMap.Geolocation",function(){a=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"}),n.addControl(a),a.getCurrentPosition(),AMap.event.addListener(a,"complete",function(t){o={id:e,clientLon:t.position.lng,clientLat:t.position.lat,projection:"withRegion"},i(o)}),AMap.event.addListener(a,"error",function(){o={id:e,projection:"withRegion"},i(o)})}),$(".btn-list a").eq(0).click(function(){$("#form-errorbox,.mask").show()}),$(".close-form,.my-know").click(function(){$(".form-tipxbox,.mask").hide()}),$(".indexgoods-left .slideBox").slide&&$(".indexgoods-left .slideBox").slide({mainCell:"ul",vis:4,prevCell:".sPrev",nextCell:".sNext",effect:"leftLoop"})});