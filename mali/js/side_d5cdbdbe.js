"use strict";$(function(){function i(i){""!==d&&(i.name=d),console.log(111111,tool.getUrlParam("val")),tool.getUrlParam("val")&&(i.name=tool.getUrlParam("val"),$(".side-inputbox input").val(tool.getUrlParam("val"))),tool.getUrlParam("pp")&&"undefined"!==tool.getUrlParam("pp")&&(i.provinceId=+tool.getUrlParam("pp")),tool.getUrlParam("c")&&"undefined"!==tool.getUrlParam("c")&&(i.cityId=+tool.getUrlParam("c")),tool.getUrlParam("a")&&"undefined"!==tool.getUrlParam("a")&&(i.districtId=+tool.getUrlParam("a")),tool.ajax("dealer:dealers",i,function(e){var s="";$(".side-content").children("li").remove();var n=e.data.content;if(n.length>0)for(var c=0;c<n.length;c++)s+='<li>\n  					<img class="fl" src="'+n[c].shopPicFull+'" alt="">\n  					<div class="fl content-right">\n  						<p class="name">['+n[c].location+"]&nbsp;"+n[c].name+'</p>\n  						<p class="user">联系人：'+n[c].masterName+'</p>\n  						<div class="daohang">\n  							<i class="icon-daohang"></i>\n  							<span>导航</span>\n  						</div>\n  					</div>\n  					<a class="jxshang-btn" href="sideagency.html?id='+n[c].id+'">经销商</a>\n  				</li>';if($.jqPaginator){var d=function(){if(e.data.totalPages<t)return 0==$(".sidetab-box").has(".no-data").length&&$(".sidetab-box").append('<div class="no-data">暂无数据</div>'),$(".pagination").hide(),{v:void 0};$(".no-data").remove();var s="side.html?p="+(t-1)+"&t="+a+"&val="+$(".side-inputbox input").val(),n="side.html?p="+(t+1)+"&t="+a+"&val="+$(".side-inputbox input").val(),c="side.html?t="+a+"&val="+$(".side-inputbox input").val();i.provinceId&&(s+="&pp="+i.provinceId,n+="&pp="+i.provinceId,c+="&pp="+i.provinceId),i.cityId&&(s+="&c="+i.cityId,n+="&c="+i.cityId,c+="&c="+i.cityId),i.districtId&&(s+="&a="+i.districtId,n+="&a="+i.districtId,c+="&a="+i.districtId),$.jqPaginator("#sidePagination",{totalPages:e.data.totalPages,visiblePages:5,currentPage:t,prev:'<li class="prev"><a href="'+s+'">上一页</a></li>',next:'<li class="next"><a href="'+n+'">下一页</a></li>',page:'<li class="page"><a href="#">{{page}}</a></li>',onPageChange:function(){$("#sidePagination .page").each(function(){var i=+$(this).find("a").text();$(this).find("a").attr("href",c+"&p="+i+"&val="+$(".side-inputbox input").val())})}})}();if("object"==typeof d)return d.v}$(".side-content").append(s)})}function e(i,e){e.children("li:not(.not-remove)").remove(),tool.ajax("area:areas/"+i+"/subList",{},function(i){var t="",a=i.data.content;if(a.length>0)for(var s=i.data.content,n=0;n<s.length;n++)t+='<li data-id="'+s[n].id+'" data-name="'+s[n].name+'">'+s[n].name+"</li>";else t="暂无数据";e.append(t)})}$(".banner-right li:eq(4)").addClass("active").siblings().removeClass("active");var t=+tool.getUrlParam("p")||1,a=+tool.getUrlParam("t")||1;$(".side-tab li:nth-child("+a+")").addClass("active").siblings("li").removeClass("active");var s,n,c={};s=new AMap.Map("container",{resizeEnable:!0}),s.plugin("AMap.Geolocation",function(){n=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"}),s.addControl(n),n.getCurrentPosition(),AMap.event.addListener(n,"complete",function(e){c={page:t-1,size:9,clientLon:e.position.lng,clientLat:e.position.lat},i(c)}),AMap.event.addListener(n,"error",function(){c={page:t-1,size:9},i(c)})}),$(".side-inputbox a").click(function(){i(c)});var d=$(".side-inputbox input").val();$(".side-tabprovice .provice").click(function(){a=1,delete c.provinceId,delete c.cityId,delete c.districtId,$(".city-chosen,.area-chosen").hide();var i=$(this).siblings(".distribute-content");i.is(":visible")?i.hide():($(this).parent().addClass("active").siblings("li").removeClass("active"),e(0,$(".distribute-provice")),i.show())}),$(".side-tabcity .city").bind("click","li",function(){a=2,delete c.provinceId,delete c.cityId,delete c.districtId,$(".side-tabcity").removeClass("active"),$(".side-tabprovice .distribute-provice,.area-chosen").hide();var i=$(this).siblings(".city-chosen");i.is(":visible")?i.hide():($(this).parent().siblings("li").removeClass("active"),e(0,i.find(".distribute-provice")),i.show().find(".distribute-provice").show())}),$(".city-chosen .distribute-provice").on("click","li",function(){var i=$(this).data("id");c.provinceId=i,$(".city-chosen .distribute-tab li:nth-child(2)").addClass("active").siblings("li").removeClass("active"),$(".city-chosen .distribute-provice").hide(),e(i,$(".city-chosen .distribute-city")),$(".city-chosen .distribute-city").show()}),$(".city-chosen .distribute-tab li:nth-child(1)").click(function(){$(this).addClass("active").siblings("li").removeClass("active"),$(this).parent().siblings(".distribute-provice").show().siblings(".distribute-city").hide(),delete c.provinceId}),$(".city-chosen .distribute-city").on("click","li",function(){var e=$(this).data("id");c.cityId=e,i(c),$(".city-chosen,.city-chosen .distribute-content").hide(),$(".side-tabcity").addClass("active").siblings("li").removeClass("active")}),$(".side-tabarea .area").bind("click","li",function(){a=3,delete c.provinceId,delete c.cityId,delete c.districtId,$(".side-tabcity").removeClass("active"),$(".side-tabprovice .distribute-provice,.city-chosen").hide();var i=$(this).siblings(".area-chosen");i.is(":visible")?(i.hide(),$(".side-tabarea").addClass("active")):($(this).parent().siblings("li").removeClass("active"),$(".side-tabarea").removeClass("active"),e(0,i.find(".distribute-provice")),$(".area-chosen .distribute-tab li:nth-child(1)").addClass("active").siblings("li").removeClass("active"),i.show().find(".distribute-provice").show())}),$(".area-chosen .distribute-provice").on("click","li",function(){var i=$(this).data("id");c.provinceId=i,$(".area-chosen .distribute-tab li:nth-child(2)").addClass("active").siblings("li").removeClass("active"),$(".area-chosen .distribute-provice").hide(),e(i,$(".area-chosen .distribute-city")),$(".area-chosen .distribute-city").show()}),$(".area-chosen .distribute-tab li:nth-child(1)").click(function(){$(this).addClass("active").siblings("li").removeClass("active"),$(this).parent().siblings(".distribute-provice").show().siblings(".distribute-content").hide(),delete c.provinceId}),$(".area-chosen .distribute-tab li:nth-child(2)").click(function(){$(this).addClass("active").siblings("li").removeClass("active"),$(this).parent().siblings(".distribute-city").show().siblings(".distribute-content").hide(),delete c.cityId}),$(".area-chosen .distribute-city").on("click","li",function(){var i=$(this).data("id");c.cityId=i,$(".area-chosen .distribute-tab li:nth-child(3)").addClass("active").siblings("li").removeClass("active"),e(i,$(".area-chosen .distribute-area")),$(".distribute-area").show().siblings(".distribute-content").hide()}),$(".area-chosen .distribute-area").on("click","li",function(){var e=$(this).data("id");c.districtId=e,i(c),$(".area-chosen,.area-chosen .distribute-content").hide(),$(".side-tabarea").addClass("active").siblings("li").removeClass("active")}),$(".side-tabprovice .distribute-provice").on("click","li",function(){var e=$(this).data("id");c.provinceId=e,$(".distribute-content").hide(),i(c)})});