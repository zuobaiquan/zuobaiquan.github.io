webpackJsonp([18],{qzG6:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("lC5x"),n=a.n(s),c=a("J0Oq"),o=a.n(c),i=a("aozt"),r=a.n(i),u=a("vMJZ"),l=(a("TIfe"),null),d="",v={name:"login",data:function(){return{sendFlag:!1,time:60,activeTab:1,activeItem:["账号登录","快捷登录"],code:"",account1:"",account2:"",pass:""}},methods:{changeTab:function(t){this.activeTab=t+1},getInputAccount1:function(t){this.account1=t},getInputPass:function(t){this.pass=t},getCode:function(){var t=this;return o()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.verifyPhone(t.account2)||t.sendFlag){e.next=14;break}return e.prev=1,e.next=4,Object(u.g)("phone="+t.account2);case 4:200==(a=e.sent).status&&a.data&&0==a.data.code?(Toast(a.data.message),t.sendFlag=!0,l=setInterval(function(){--this.time,0==this.time&&(this.sendFlag=!1,this.time=60,clearInterval(l))}.bind(t),1e3)):(d=Toast(a.data.message),t.sendFlag=!1,t.time=60,clearInterval(l)),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(1),Toast("接口异常，稍后再试"),t.sendFlag=!1,t.time=60,clearInterval(l);case 14:case"end":return e.stop()}},e,t,[[1,8]])}))()},submit:function(){var t=this;return o()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=t.activeTab){e.next=4;break}if(t.verifyPhone(t.account1)&&t.verifyPassword(t.pass))try{t.$store.dispatch("LoginByPass",{account:t.account1,password:t.pass}).then(function(e){200==e.status&&e.data&&0==e.data.code?(d=Toast("登陆成功"),r.a.defaults.headers.common.Authorization=e.data.data,setTimeout(function(){Indicator.close(),this.$router.replace({path:"index"})}.bind(t),1500)):Toast(e.data.message)})}catch(t){Toast("接口异常，稍后再试")}e.next=9;break;case 4:if(!(t.verifyPhone(t.account2)&&t.isEmpty(t.code,"验证码不能为空")&&t.verifyLength(t.code,"验证码输入6位"))){e.next=9;break}if(t.sendFlag){e.next=8;break}return Toast("请获取验证码"),e.abrupt("return");case 8:try{t.$store.dispatch("LoginByCode",{account:t.account2,code:t.code}).then(function(e){200==e.status&&e.data&&0==e.data.code?(d=Toast("登陆成功"),r.a.defaults.headers.common.Authorization=e.data.data,setTimeout(function(){Indicator.close(),this.$router.replace({path:"index"})}.bind(t),1500)):Toast(e.data.message)})}catch(t){Toast("接口异常，稍后再试")}case 9:case"end":return e.stop()}},e,t)}))()}},beforeDestroy:function(){d&&d.close()}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-box"},[a("header",{staticClass:"user-title"},[t._v("登陆")]),t._v(" "),a("ul",{staticClass:"tab-list"},t._l(t.activeItem,function(e,s){return a("li",{class:{active:t.activeTab==s+1},on:{click:function(e){t.changeTab(s)}}},[t._v(t._s(e))])})),t._v(" "),a("section",{staticClass:"form-box"},[a("i",{staticClass:"form-logo"}),t._v(" "),a("ul",{staticClass:"form-list"},[a("li",[a("i",{staticClass:"form-icon",class:1==t.activeTab?"icon-user":"icon-phone"}),t._v(" "),1==t.activeTab?[a("emInput",{attrs:{placeholder:"请输入账号"},on:{input:t.getInputAccount1}})]:t._e(),t._v(" "),2==t.activeTab?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.account2,expression:"account2"}],attrs:{type:"tel",maxlength:"11",placeholder:"请输入手机号码"},domProps:{value:t.account2},on:{input:function(e){e.target.composing||(t.account2=e.target.value)}}})]:t._e()],2),t._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:2==t.activeTab,expression:"activeTab==2"}]},[a("i",{staticClass:"form-icon icon-code"}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"tel",placeholder:"请输入验证码",maxlength:"6"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),a("a",{staticClass:"get-code",attrs:{href:"javascript:;"},on:{click:t.getCode}},[t._v(t._s(t.sendFlag?t.time+"s":"获取验证码"))])]),t._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:1==t.activeTab,expression:"activeTab==1"}]},[a("i",{staticClass:"form-icon icon-password"}),t._v(" "),a("emInput",{attrs:{placeholder:"请设置您的登录密码",star:!0},on:{input:t.getInputPass}})],1)]),t._v(" "),a("a",{staticClass:"fine-btn btning",attrs:{href:"javascript:;"},on:{click:t.submit}},[t._v("登陆")]),t._v(" "),a("div",{staticClass:"fine-tips"},[a("router-link",{staticClass:"fine-forget",attrs:{tag:"a",to:"/findpass"}},[t._v("忘记密码")]),t._v(" "),a("router-link",{staticClass:"fine-login",attrs:{tag:"a",to:"/register"}},[t._v("没有账号？去注册")])],1)])])},staticRenderFns:[]},f=a("C7Lr")(v,p,!1,null,null,null);e.default=f.exports}});