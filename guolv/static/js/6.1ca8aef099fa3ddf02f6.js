webpackJsonp([6],{TAtT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("lC5x"),r=a.n(s),n=a("J0Oq"),i=a.n(n),c=a("ZLEe"),o=a.n(c),d=a("5nAI"),l=a.n(d),u=a("vMJZ"),p=a("cNj1"),m=a("GKtG"),v={name:"cardapplyaddr",data:function(){return{name:"",phone:"",street:"",province:"",city:"",area:"",regionVisible:!1,addrList:[],addressProvince:"",addressCity:"",addressCounty:"",myAddressSlots:[{flex:1,defaultIndex:1,values:o()(l.a),className:"slot1",textAlign:"center"},{divider:!0,content:"-",className:"slot2"},{flex:1,values:[],className:"slot3",textAlign:"center"},{divider:!0,content:"-",className:"slot4"},{flex:1,values:[],className:"slot5",textAlign:"center"}],cardid:"",cardDiy:"",cardType:"",certType:"",currency:"",diyContent:""}},methods:{goBack:function(){this.$router.back(-1)},selectArea:function(){this.regionVisible=!0},cancleaddress:function(){this.regionVisible=!1},goPage:function(e){var t=this;return i()(r.a.mark(function a(){var s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(m.b)(e);case 2:if(200!=(s=a.sent).status||!s.data||0!=s.data.code){a.next=7;break}1!=t.cardType||2!=t.certType||-1!=t.auth&&2!=t.auth?t.$router.replace({path:"index"}):t.$router.replace({path:"userauth"}),a.next=9;break;case 7:return Toast(s.data.message),a.abrupt("return");case 9:case"end":return a.stop()}},a,t)}))()},selectaddress:function(){this.regionVisible=!1,this.province=this.addressProvince,this.city=this.addressCity,this.area=this.addressCounty},onMyAddressChange:function(e,t){l.a[t[0]]&&(e.setSlotValues(1,o()(l.a[t[0]])),e.setSlotValues(2,l.a[t[0]][t[1]]),this.addressProvince=t[0],this.addressCity=t[1],this.addressCounty=t[2])},submit:function(){var e=this;return i()(r.a.mark(function t(){var a,s,n,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.isEmpty(e.name,"收货人姓名不能为空")&&e.verifyPhone(e.phone)&&e.isEmpty(e.province,"请选择省份")&&e.isEmpty(e.city,"请选择市级")&&e.isEmpty(e.area,"请选择区域")&&e.isEmpty(e.street,"详细地址不能为空"))){t.next=33;break}if(a={area:e.area,city:e.city,isDefault:0,name:e.name,phone:e.phone,province:e.province,street:e.street},s={cardid:e.cardid,cardDiy:e.cardDiy,cardType:e.cardType,certType:e.certType,currency:e.currency},1==e.cardDiy&&1==e.cardType&&(s.diyContent=e.diyContent),!(e.addrList.length>0&&e.isObjectValueEqual(a,e.addrList[0]))){t.next=9;break}s.addressId=e.addrList[0].id,e.goPage(s),t.next=33;break;case 9:if(0!=e.addrList.length){t.next=22;break}return t.next=12,Object(p.a)(a);case 12:if(200!=(n=t.sent).status||!n.data||0!=n.data.code){t.next=18;break}s.addressId=n.data.data.id,e.goPage(s),t.next=20;break;case 18:return Toast(n.data.message),t.abrupt("return");case 20:t.next=33;break;case 22:return a.id=e.addrList[0].id,t.next=25,Object(p.b)(a);case 25:if(200!=(i=t.sent).status||!i.data||0!=i.data.code){t.next=31;break}s.addressId=a.id,e.goPage(s),t.next=33;break;case 31:return Toast(i.data.message),t.abrupt("return");case 33:case"end":return t.stop()}},t,e)}))()}},created:function(){var e=this;return i()(r.a.mark(function t(){var a,s,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.$nextTick(function(){document.body.className="bgGray"}),e.cardid=e.getUrlParam("cardid"),e.cardDiy=e.getUrlParam("cardDiy"),e.cardType=e.getUrlParam("cardType"),e.certType=e.getUrlParam("certType"),e.currency=e.getUrlParam("currency"),e.diyContent=e.getUrlParam("diyContent"),t.next=9,Object(p.c)();case 9:return 200==(a=t.sent).status&&a.data?(e.addrList=a.data.data,e.addrList.length>0&&(s=e.addrList[0],e.name=s.name,e.street=s.street,e.phone=s.phone,e.province=s.province,e.city=s.city,e.area=s.area,e.addressProvince=s.province,e.addressCity=s.city,e.addressCounty=s.area)):Toast(a.data.message||"接口异常，稍后再试"),t.next=13,Object(u.e)();case 13:if(!(n=t.sent).data||0!=n.data.code){t.next=19;break}e.certDetail=n.data.data,e.auth=+e.certDetail.status,t.next=25;break;case 19:if(!n.data||-1!=n.data.code){t.next=24;break}return e.auth=-1,t.abrupt("return");case 24:console.log(n.data.message||"接口异常，稍后再试");case 25:e.$nextTick(function(){e.myAddressSlots[0].defaultIndex=0});case 26:case"end":return t.stop()}},t,e)}))()},beforeDestroy:function(){document.body.className=""}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-box"},[a("div",{staticClass:"tit-title"},[a("a",{staticClass:"arrow-left",attrs:{href:"javascript:;"},on:{click:e.goBack}}),e._v("收货地址"),a("a",{staticClass:"house-icon",attrs:{href:"javascript:;"},on:{click:e.userPage}})]),e._v(" "),a("p",{staticClass:"common-txt"},[e._v("收货地址")]),e._v(" "),a("section",{staticClass:"form-box form-box3"},[a("ul",{staticClass:"form-list"},[a("li",[a("i",{staticClass:"form-icon icon-user"}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{placeholder:"请输入收货人姓名",type:"text",name:"",value:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),a("li",[a("i",{staticClass:"form-icon icon-phone"}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{placeholder:"请输入收货人的联系方式",maxlength:"11",type:"tel",name:"",value:""},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),e._v(" "),a("li",[a("i",{staticClass:"form-icon icon-place"}),e._v(" "),a("ul",{staticClass:"select-area",on:{click:e.selectArea}},[a("li",[a("span",[e._v(e._s(e.province||"请选择省份"))])]),e._v(" "),a("li",[a("span",[e._v(e._s(e.city||"选择市"))])]),e._v(" "),a("li",[a("span",[e._v(e._s(e.area||"选择区"))])])])]),e._v(" "),a("li",{staticClass:"textarea-li no-border"},[a("i",{staticClass:"form-icon icon-place"}),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.street,expression:"street"}],attrs:{cols:"2",placeholder:"请填写详细地址，如街道名称，门派号码，楼层和房间号等信息"},domProps:{value:e.street},on:{input:function(t){t.target.composing||(e.street=t.target.value)}}})])])]),e._v(" "),a("a",{staticClass:"fine-btn singe-finebtn btning",attrs:{href:"javascript:;"},on:{click:e.submit}},[e._v("提交申请")]),e._v(" "),a("mt-popup",{staticClass:"region-popup",attrs:{position:"bottom"},model:{value:e.regionVisible,callback:function(t){e.regionVisible=t},expression:"regionVisible"}},[a("div",{staticClass:"picker-toolbar"},[a("span",{staticClass:"mint-datetime-action mint-datetime-cancel",staticStyle:{position:"relative","z-index":"2",color:"#666"},on:{click:e.cancleaddress}},[e._v("取消")]),e._v(" "),a("span",{staticClass:"mint-datetime-action mint-datetime-confirm",staticStyle:{position:"relative","z-index":"2",color:"#234623"},on:{click:e.selectaddress}},[e._v("确定")])]),e._v(" "),a("mt-picker",{attrs:{slots:e.myAddressSlots},on:{change:e.onMyAddressChange}})],1)],1)},staticRenderFns:[]},f=a("C7Lr")(v,y,!1,null,null,null);t.default=f.exports},cNj1:function(e,t,a){"use strict";t.a=function(e){return Object(n.a)({url:"/api/address",method:"post",data:r()(e),headers:{"Content-Type":"application/json;charset=utf-8"}})},t.b=function(e){return Object(n.a)({url:"/api/address",method:"PATCH",data:r()(e),headers:{"Content-Type":"application/json;charset=utf-8"}})},t.c=function(e){return Object(n.a)({url:"/api/address",method:"get",params:e})};var s=a("3cXf"),r=a.n(s),n=a("vLgD")}});