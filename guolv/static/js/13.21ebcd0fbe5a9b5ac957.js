webpackJsonp([13],{JGWG:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("lC5x"),n=s.n(a),r=s("J0Oq"),i=s.n(r),o=s("aozt"),c=s.n(o),l=s("TIfe"),p=s("vMJZ"),u=null,d="",h={name:"Register",data:function(){return{sendFlag:!1,time:60,phone:"",code:"",pass:"",repass:""}},methods:{getInputphone:function(t){this.phone=t},getInputPass:function(t){this.pass=t},getInputRepass:function(t){this.repass=t},getCode:function(){var t=this;return i()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.verifyPhone(t.phone)||t.sendFlag){e.next=14;break}return e.prev=1,e.next=4,Object(p.g)("phone="+t.phone);case 4:200==(s=e.sent).status&&s.data&&0==s.data.code?(Toast(s.data.message),t.sendFlag=!0,u=setInterval(function(){--this.time,0==this.time&&(this.sendFlag=!1,this.time=60,clearInterval(u))}.bind(t),1e3)):(Toast(s.data.message),t.sendFlag=!1,t.time=60,clearInterval(u)),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(1),Toast("接口异常，稍后再试"),t.sendFlag=!1,t.time=60,clearInterval(u);case 14:case"end":return e.stop()}},e,t,[[1,8]])}))()},submit:function(){var t=this;return i()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.verifyPhone(t.phone)&&t.isEmpty(t.code,"验证码不能为空")&&t.verifyLength(t.code,"验证码输入6位")&&t.verifyPassword(t.pass)&&t.verifyPassword(t.repass,2)&&t.isEquals(t.pass,t.repass))){e.next=5;break}if(t.sendFlag){e.next=4;break}return Toast("请获取验证码"),e.abrupt("return");case 4:try{t.$store.dispatch("register",{code:t.code,mobile:t.phone,password:t.pass}).then(function(e){200==e.status&&e.data&&0==e.data.code?(d=Toast("注册成功"),c.a.defaults.headers.common.Authorization=e.data.data,Object(l.c)(e.data.data),setTimeout(function(){Indicator.close(),this.$router.replace({path:"index"})}.bind(t),1500)):Toast(e.data.message)})}catch(t){Toast("接口异常，稍后再试")}case 5:case"end":return e.stop()}},e,t)}))()}},beforeDestroy:function(){d&&d.close()}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-box"},[s("header",{staticClass:"user-title"},[t._v("注册")]),t._v(" "),s("section",{staticClass:"form-box"},[s("i",{staticClass:"form-logo"}),t._v(" "),s("ul",{staticClass:"form-list"},[s("li",[s("i",{staticClass:"form-icon icon-phone"}),t._v(" "),s("emInput",{attrs:{type:"number",maxlength:11,placeholder:"请输入手机号码"},on:{input:t.getInputphone}})],1),t._v(" "),s("li",[s("i",{staticClass:"form-icon icon-code"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"tel",placeholder:"请输入验证码",maxlength:"6"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),s("a",{staticClass:"get-code",attrs:{href:"javascript:;"},on:{click:t.getCode}},[t._v(t._s(t.sendFlag?t.time+"s":"获取验证码"))])]),t._v(" "),s("li",[s("i",{staticClass:"form-icon icon-password"}),t._v(" "),s("emInput",{attrs:{star:!0,placeholder:"请设置您的登录密码"},on:{input:t.getInputPass}})],1),t._v(" "),s("li",[s("i",{staticClass:"form-icon icon-repassword"}),t._v(" "),s("emInput",{attrs:{star:!0,placeholder:"再次确认您的登录密码"},on:{input:t.getInputRepass}})],1)]),t._v(" "),s("a",{staticClass:"fine-btn btning",attrs:{href:"javascript:;"},on:{click:t.submit}},[t._v("注册")]),t._v(" "),s("a",{staticClass:"fine-login",attrs:{href:"#/login"}},[t._v("已有账号，去登录")])]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"protocol-txt"},[this._v("注册即代表我已阅读并同意"),e("a",{attrs:{href:"javascript:;"}},[this._v("《金科元素》")]),this._v("协议")])}]},f=s("C7Lr")(h,v,!1,null,null,null);e.default=f.exports}});