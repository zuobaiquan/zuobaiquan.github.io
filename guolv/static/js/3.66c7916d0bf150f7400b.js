webpackJsonp([3],{onEG:function(a,e,t){"use strict";e.a=function(a){return Object(s.a)({url:"/api/bank/bankList",method:"get",params:a})},e.b=function(a){return Object(s.a)({url:"/api/bank/myBankCard",method:"get",params:a})},e.c=function(a){return Object(s.a)({url:"/api/bank/searchBankBranch",method:"post",data:a,headers:{"Content-Type":"application/x-www-form-urlencoded"}})};var s=t("vLgD")},s93X:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("lC5x"),n=t.n(s),c=t("J0Oq"),i=t.n(c),r=t("ZLEe"),o=t.n(r),l=t("5nAI"),d=t.n(l),u=t("GKtG"),m=t("onEG"),p=t("1zv/"),v=t("GKmE"),h={name:"transferFund",data:function(){return{cardId:"",moneyNum:"",maskShow:!1,cardInfo:{},banklistVisible:!1,bankList:[],selectBankName:"",selectBName:"",banklistSlots:[{flex:1,defaultIndex:1,values:[],textAlign:"center"}],regionVisible:!1,myAddressSlots:[{flex:1,defaultIndex:1,values:o()(d.a),className:"slot1",textAlign:"center"},{divider:!0,content:"-",className:"slot2"},{flex:1,values:[],className:"slot3",textAlign:"center"}],addressProvince:"",addressCity:"",province:"",city:"",maskSearch:!1,bankCode:"",keyword:"",loadsearch:!1,searchList:[],bankBranchCode:"",bankBranchName:"",bankAccName:"",bankAccNo:"",submitFlag:!1}},watch:{keyword:function(a,e){var t=this;return i()(n.a.mark(function s(){return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:a!==e&&Object(v.c)(t.getBankSearch(),250);case 1:case"end":return s.stop()}},s,t)}))()}},methods:{hideSearch:function(){this.maskSearch=!1},openSearch:function(){this.bankCode?this.province?this.city?this.maskSearch=!0:Toast("请选择市区再选择"):Toast("请选择省份再选择"):Toast("请选择转账银行再选择")},getBankBranch:function(a){this.bankBranchName=a.bankName,this.bankBranchCode=a.canpsNo,this.maskSearch=!1},closePop:function(){this.maskShow=!1},canclebank:function(){this.banklistVisible=!1},getBankSearch:function(){var a=this;return i()(n.a.mark(function e(){var t,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.loadsearch=!1,t="provinceName="+a.province+"&cityName="+a.city+"&keyword="+a.keyword+" &bankCode="+a.bankCode+" ",e.next=4,Object(m.c)(t);case 4:200==(s=e.sent).status&&s.data?(a.searchList=s.data.data.resultSet,a.loadsearch=!0):Toast(s.data.message||"接口异常，稍后再试");case 6:case"end":return e.stop()}},e,a)}))()},selectbank:function(){var a=this;this.selectBankName=this.selectBName,this.banklistVisible=!1,this.bankList.map(function(e){e.bankName!=a.selectBName||(a.bankCode=e.code)})},onBankChange:function(a,e){this.selectBName=e[0]},selectBank:function(){this.banklistVisible=!0},selectArea:function(){this.regionVisible=!0},cancleaddress:function(){this.regionVisible=!1},selectaddress:function(){this.regionVisible=!1,this.province=this.addressProvince,this.city=this.addressCity},onMyAddressChange:function(a,e){d.a[e[0]]&&(a.setSlotValues(1,o()(d.a[e[0]])),a.setSlotValues(2,d.a[e[0]][e[1]]),this.addressProvince=e[0],this.addressCity=e[1])},withdrawSubmit:function(){var a=this;return i()(n.a.mark(function e(){var t,s,c;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.isMoney(a.moneyNum)&&a.isEmpty(a.bankAccName,"姓名不为空")&&a.isEmpty(a.bankAccNo,"卡号不为空")&&a.verifyLength(a.bankAccNo,"卡号为16位",16)&&a.isEmpty(a.bankCode,"请选择转账银行")&&a.isEmpty(a.province,"请选择省份")&&a.isEmpty(a.city,"请选择市区")&&a.isEmpty(a.bankBranchName,"开户行名称不能为空"))){e.next=26;break}return Indicator.open(),a.submitFlag=!0,e.prev=3,t="amount="+100*a.moneyNum+"&bankAccName="+a.bankAccName+"&bankAccNo="+a.bankAccNo+"&bankBranchCode="+a.bankBranchCode+"&bankCode="+a.bankCode+"&cardId="+a.cardId,e.next=7,Object(p.e)(t);case 7:if(200!=(s=e.sent).status||!s.data||0!=s.data.code){e.next=16;break}return a.submitFlag=!1,Indicator.close(),c=s.data.data,a.$router.push({path:"withdraw",query:{cardid:a.cardId,tradeno:c.tradeNo,aamount:c.accountAmount,acurrency:c.accountCurrency,oamount:c.orderAmount,ocurrency:c.orderCurrency,feeamount:c.feeAmount}}),e.abrupt("return");case 16:a.submitFlag=!1,Indicator.close(),Toast(s.data.message||"接口异常，稍后再试");case 19:e.next=26;break;case 21:e.prev=21,e.t0=e.catch(3),a.submitFlag=!1,Indicator.close(),Toast("接口异常，稍后再试");case 26:case"end":return e.stop()}},e,a,[[3,21]])}))()}},created:function(){var a=this;return i()(n.a.mark(function e(){var t,s,c;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.cardId=a.getUrlParam("cardid"),a.$nextTick(function(){document.body.className="bgGray"}),e.prev=2,e.next=5,Object(u.i)({cardId:a.cardId});case 5:return 200==(t=e.sent).status&&t.data?a.cardInfo=t.data.data:Toast(t.data.message||"接口异常，稍后再试"),e.next=9,Object(m.a)();case 9:200==(s=e.sent).status&&s.data?(c=[],a.bankList=s.data.data,s.data.data.length>0&&s.data.data.map(function(a){c.push(a.bankName)}),a.banklistSlots[0].values=c):Toast(s.data.message||"接口异常，稍后再试"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a.$store.dispatch("LogOut").then(function(){location.reload()});case 16:case"end":return e.stop()}},e,a,[[2,13]])}))()},beforeDestroy:function(){document.body.className=""}},k={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"person-center index-box",attrs:{id:"searchInputbox"}},[t("div",{staticClass:"tit-title"},[t("a",{staticClass:"arrow-left",attrs:{href:"javascript:;"},on:{click:a.goBack}}),a._v("提现"),t("a",{staticClass:"house-icon",attrs:{href:"javascript:;"},on:{click:a.userPage}})]),a._v(" "),t("ul",{staticClass:"info-list"},[t("li",[t("span",[a._v("卡号")]),a._v(" "),t("span",{staticClass:"right-graytxt"},[a._v(a._s(a.cardInfo.cardApplyInfo&&a.cardInfo.cardApplyInfo.cardNo))])]),a._v(" "),t("li",[t("span",[a._v("账户币种")]),a._v(" "),t("span",{staticClass:"right-graytxt"},[a._v(a._s(a._f("currencyType")(a.cardInfo.cardApplyInfo&&a.cardInfo.cardApplyInfo.currency)))])]),a._v(" "),t("li",[t("span",[a._v("状态")]),a._v(" "),t("span",{staticClass:"right-graytxt"},[a._v(a._s(a._f("cardStatus")(a.cardInfo.cardApplyInfo&&a.cardInfo.cardApplyInfo.cardStatus)))])]),a._v(" "),t("li",[t("span",[a._v("余额")]),a._v(" "),t("span",{staticClass:"right-orangetxt"},[a._v(a._s(a._f("moneyUnit")(a.cardInfo.globalInfo&&a.cardInfo.globalInfo.balance))),t("sub",[a._v(a._s(a.cardInfo.cardApplyInfo&&a.cardInfo.cardApplyInfo.currency))])])])]),a._v(" "),t("div",{staticClass:"recharge-money"},[t("p",{staticClass:"recharge-tit"},[a._v("充值金额")]),a._v(" "),t("div",{staticClass:"recharge-number"},[t("span",[a._v("¥")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.moneyNum,expression:"moneyNum"}],attrs:{onkeyup:"this.value=this.value.replace(/[^0-9.]/g,'')",placeholder:"请输入您要提现的金额",type:"text",name:"",value:""},domProps:{value:a.moneyNum},on:{input:function(e){e.target.composing||(a.moneyNum=e.target.value)}}})])]),a._v(" "),t("p",{staticClass:"common-txt"},[a._v("提现到")]),a._v(" "),t("ul",{staticClass:"info-list"},[t("li",[t("span",[a._v("持卡人姓名")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.bankAccName,expression:"bankAccName"}],attrs:{placeholder:"请输入银行卡持卡人姓名",type:"text",name:"",value:""},domProps:{value:a.bankAccName},on:{input:function(e){e.target.composing||(a.bankAccName=e.target.value)}}})]),a._v(" "),t("li",[t("span",[a._v("银行卡号")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.bankAccNo,expression:"bankAccNo"}],attrs:{placeholder:"请输入持卡人的银行卡号",type:"tel",maxlength:"16",value:""},domProps:{value:a.bankAccNo},on:{input:function(e){e.target.composing||(a.bankAccNo=e.target.value)}}})]),a._v(" "),t("li",{on:{click:a.selectBank}},[t("span",[a._v("选择转账银行")]),a._v(" "),t("span",{staticClass:"right-arrow"},[a._v(a._s(a.selectBankName))])]),a._v(" "),t("li",{staticClass:"balance-li",on:{click:a.selectArea}},[t("span",[a._v(a._s(a.province?a.province:"请选择省份"))]),a._v(" "),t("span",[a._v(a._s(a.city?a.city:"选择市"))])]),a._v(" "),t("li",{on:{click:a.openSearch}},[t("span",[a._v("开户行名称")]),a._v(" "),t("div",{staticClass:"right-arrow right-arrowflow"},[a._v(a._s(a.bankBranchName))])])]),a._v(" "),t("a",{staticClass:"fine-btn singe-finebtn btning",class:{disabled:a.submitFlag},attrs:{href:"javascript:;"},on:{click:a.withdrawSubmit}},[a._v("提现")]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:a.maskShow,expression:"maskShow"}],staticClass:"mask"}),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:a.maskShow,expression:"maskShow"}],staticClass:"popBox"},[t("p",{staticClass:"pop-title"},[a._v("转账失败")]),a._v(" "),a._m(0),a._v(" "),t("a",{staticClass:"pop-btn",attrs:{href:"javascript:;"},on:{click:a.closePop}},[a._v("好的，我知道了")])]),a._v(" "),t("mt-popup",{staticClass:"region-popup",attrs:{position:"bottom"},model:{value:a.banklistVisible,callback:function(e){a.banklistVisible=e},expression:"banklistVisible"}},[t("div",{staticClass:"picker-toolbar"},[t("span",{staticClass:"mint-datetime-action mint-datetime-cancel",staticStyle:{position:"relative","z-index":"2",color:"#666"},on:{click:a.canclebank}},[a._v("取消")]),a._v(" "),t("span",{staticClass:"mint-datetime-action mint-datetime-confirm",staticStyle:{position:"relative","z-index":"2",color:"#234623"},on:{click:a.selectbank}},[a._v("确定")])]),a._v(" "),t("mt-picker",{attrs:{slots:a.banklistSlots},on:{change:a.onBankChange}})],1),a._v(" "),t("mt-popup",{staticClass:"region-popup",attrs:{position:"bottom"},model:{value:a.regionVisible,callback:function(e){a.regionVisible=e},expression:"regionVisible"}},[t("div",{staticClass:"picker-toolbar"},[t("span",{staticClass:"mint-datetime-action mint-datetime-cancel",staticStyle:{position:"relative","z-index":"2",color:"#666"},on:{click:a.cancleaddress}},[a._v("取消")]),a._v(" "),t("span",{staticClass:"mint-datetime-action mint-datetime-confirm",staticStyle:{position:"relative","z-index":"2",color:"#234623"},on:{click:a.selectaddress}},[a._v("确定")])]),a._v(" "),t("mt-picker",{attrs:{slots:a.myAddressSlots},on:{change:a.onMyAddressChange}})],1),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:a.maskSearch,expression:"maskSearch"}],staticClass:"mask",on:{click:a.hideSearch}}),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:a.maskSearch,expression:"maskSearch"}],staticClass:"search-bank"},[t("i",{staticClass:"close-search",on:{click:a.hideSearch}}),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.keyword,expression:"keyword"}],attrs:{id:"inputForm",placeholder:"请输入关键字",type:"text",name:"",value:""},domProps:{value:a.keyword},on:{input:function(e){e.target.composing||(a.keyword=e.target.value)}}}),a._v(" "),t("ul",{directives:[{name:"show",rawName:"v-show",value:a.searchList.length>0,expression:"searchList.length>0"}],staticClass:"search-list",attrs:{id:"contentBox"}},a._l(a.searchList,function(e,s){return t("li",{on:{click:function(t){a.getBankBranch(e)}}},[a._v(a._s(e.bankName))])})),a._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:0==a.searchList.length&&a.loadsearch,expression:"searchList.length==0 && loadsearch"}],staticClass:"no-data"},[a._v("暂无搜索结果")])])],1)},staticRenderFns:[function(){var a=this.$createElement,e=this._self._c||a;return e("div",{staticClass:"pop-content"},[e("p",{staticClass:"pop-express"},[this._v("此平台仅支持同币种FinE卡之间转账，请重新核对您的信息再操作！")])])}]},b=t("C7Lr")(h,k,!1,null,null,null);e.default=b.exports}});