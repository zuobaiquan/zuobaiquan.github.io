webpackJsonp([22],{wDu5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("lC5x"),n=a.n(s),r=a("J0Oq"),o=a.n(r),i=a("TIfe"),c=a("vMJZ"),l=null,u="",d={data:function(){return{sendFlag:!1,time:60,code:"",newPassword:"",newrePassword:"",phone:""}},methods:{goBack:function(){this.$router.replace({path:"accountsecurity"})},getInputpass:function(e){this.newPassword=e},getInputrepass:function(e){this.newrePassword=e},getCode:function(){var e=this;return o()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.verifyPhone(e.phone)||e.sendFlag){t.next=14;break}return t.prev=1,t.next=4,Object(c.g)("phone="+e.phone);case 4:200==(a=t.sent).status&&a.data&&0==a.data.code?(Toast(a.data.message),e.sendFlag=!0,l=setInterval(function(){--this.time,0==this.time&&(this.sendFlag=!1,this.time=60,clearInterval(l))}.bind(e),1e3)):(u=Toast(a.data.message),e.sendFlag=!1,e.time=60,clearInterval(l)),t.next=14;break;case 8:t.prev=8,t.t0=t.catch(1),Toast("接口异常，稍后再试"),e.sendFlag=!1,e.time=60,clearInterval(l);case 14:case"end":return t.stop()}},t,e,[[1,8]])}))()},submit:function(){var e=this;return o()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.verifyPhone(e.phone)&&e.isEmpty(e.code,"验证码不能为空")&&e.verifyLength(e.code,"验证码输入6位")&&e.verifyPassword(e.newPassword)&&e.verifyPassword(e.newrePassword,2)&&e.isEquals(e.newPassword,e.newrePassword))){t.next=14;break}if(e.sendFlag){t.next=4;break}return Toast("请获取验证码"),t.abrupt("return");case 4:return t.prev=4,t.next=7,Object(c.c)("newPassword="+e.newPassword+"&code="+e.code+"&phone="+e.phone);case 7:200==(a=t.sent).status&&a.data&&0==a.data.code?(u=Toast("密码已修改，请重新登陆"),Object(i.b)(),setTimeout(function(){this.$router.replace({path:"login"})}.bind(e),1500)):(u=Toast(a.data.message),e.sendFlag=!1,e.time=60,clearInterval(l)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),u=Toast("接口异常，稍后再试");case 14:case"end":return t.stop()}},t,e,[[4,11]])}))()}},created:function(){this.$nextTick(function(){document.body.className="bgGray"})},beforeDestroy:function(){document.body.className="",u&&u.close()}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"person-center index-box"},[a("div",{staticClass:"tit-title"},[a("a",{staticClass:"arrow-left",attrs:{href:"javascript:;"},on:{click:e.goBack}}),e._v("忘记密码"),a("a",{staticClass:"house-icon",attrs:{href:"javascript:;"},on:{click:e.userPage}})]),e._v(" "),a("ul",{staticClass:"info-list"},[a("li",[a("span",[e._v("手机号码")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"tel",maxlength:"11",placeholder:"请输入您的手机号码",value:""},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})])]),e._v(" "),a("ul",{staticClass:"info-list"},[a("li",{staticClass:"no-borderline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"input-left",attrs:{type:"tel",maxlength:"6",placeholder:"请输入验证码",value:""},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),e._v(" "),a("a",{staticClass:"get-code",attrs:{href:"javascript:;"},on:{click:e.getCode}},[e._v(e._s(e.sendFlag?e.time+"s":"获取验证码"))])])]),e._v(" "),a("div",{staticClass:"common-txt"},[e._v("新密码")]),e._v(" "),a("ul",{staticClass:"info-list"},[a("li",{staticClass:"no-borderline"},[a("emInput",{attrs:{maxlength:6,className:"input-left",star:!0,placeholder:"请设置新密码"},on:{input:e.getInputpass}})],1)]),e._v(" "),a("div",{staticClass:"common-txt"},[e._v("确认密码")]),e._v(" "),a("ul",{staticClass:"info-list"},[a("li",{staticClass:"no-borderline"},[a("emInput",{attrs:{maxlength:6,className:"input-left",star:!0,placeholder:"请再次输入密码"},on:{input:e.getInputrepass}})],1)]),e._v(" "),a("a",{staticClass:"fine-btn singe-finebtn btning",attrs:{href:"javascript:;"},on:{click:e.submit}},[e._v("确认")])])},staticRenderFns:[]},v=a("C7Lr")(d,p,!1,null,null,null);t.default=v.exports}});