webpackJsonp([9],{Uu9s:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("dByW"),r=a("t5DY"),s={data:function(){return{dialogVisible2:!1,dialogImageUrl:"",editFlag:!1,baseURL:"http://figo-medu-cloud.figo.cn/api/vendor:oss/files",form:{status:!0},rules:{link:[{required:!0,validator:function(t,e,a){return e?/^https?:\/\/(([a-zA-Z0-9_-])+(\.)?)*(:\d+)?(\/((\.)?(\?)?=?&?[a-zA-Z0-9_-](\?)?)*)*$/i.test(e)?void a():a(new Error("鏈接格式不正确")):a(new Error("鏈接不能为空"))},trigger:"blur"}],title:[{required:!0,message:"廣告名稱不能为空",trigger:"blur"}]},edit:this.$route.params.editid,flag:this.$route.params.flag}},created:function(){var t=this;-1==this.flag?(Object(i.d)(this.$route.params.editid).then(function(e){t.form=e.data.data}),this.$route.meta.title="編輯廣告"):this.$route.meta.title="添加廣告"},methods:{handlePictureCardPreview:function(t){this.dialogImageUrl=t,this.dialogVisible2=!0},goBack:function(){this.$router.go(-1)},handleImagebeforeUpload:function(t){var e=this,a=new FormData;a.append("files",t),a.append("userId",+adminId),Object(r.a)(a).then(function(t){200==t.status&&(e.form.image=""+t.data.data.content[0],console.log(e.form.image))})},handelErrorForm:function(){return""!=this.form.image||(this.$message({message:"請上傳廣告圖片",type:"warning"}),!1)},submitRes:function(t){var e=this;this.$refs[t].validate(function(t){if(!t||!e.handelErrorForm())return console.log("error submit!!"),!1;console.log("submit!"),-1==e.flag?Object(i.c)({id:e.form.id,title:e.form.title,link:e.form.link,position:"default",rank:0,image:e.form.image.replace("",""),status:e.form.status}).then(function(t){200==t.status?(e.$message({message:"修改成功",type:"success"}),e.$router.push({name:"Ads"})):e.$message({message:"修改失敗",type:"warning"})}):Object(i.a)({title:e.form.title,link:e.form.link,position:"default",rank:0,image:e.form.image.replace("",""),status:e.form.status}).then(function(t){200==t.status?(e.$message({message:"添加成功",type:"success"}),e.$router.push({name:"Ads"})):e.$message({message:"添加失敗",type:"warning"})})})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"廣告名稱",prop:"title"}},[a("el-input",{attrs:{placeholder:"請輸入廣告名稱"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("div",{staticStyle:{display:"inline-block"}},[a("label",{staticClass:"el-form-item__label",staticStyle:{width:"120px"}},[t._v("廣告圖片")]),t._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{"before-upload":t.handleImagebeforeUpload,"show-file-list":!1,action:t.baseURL,drag:""}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("將文件拖到此處，或"),a("em",[t._v("點擊上傳")])])])],1),t._v(" "),t.form.image?a("div",{staticStyle:{"margin-left":"20px",display:"inline-block"}},[a("img",{staticStyle:{"max-width":"400px","max-height":"320px",cursor:"pointer","vertical-align":"middle"},attrs:{src:t.form.image,alt:""},on:{click:function(e){t.handlePictureCardPreview(t.form.image)}}})]):t._e(),t._v(" "),a("br"),a("br"),t._v(" "),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"鏈接至H5",prop:"link"}},[a("el-input",{attrs:{placeholder:"請輸入鏈接"},model:{value:t.form.link,callback:function(e){t.$set(t.form,"link",e)},expression:"form.link"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"狀態",prop:"status"}},[a("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-radio",{attrs:{label:!0}},[t._v("顯示")]),t._v(" "),a("el-radio",{attrs:{label:!1}},[t._v("隱藏")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitRes("form")}}},[t._v("確定")]),t._v(" "),a("el-button",{on:{click:function(e){t.goBack()}}},[t._v("返回")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible2},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]},o=a("/Xao")(s,l,!1,null,null,null);e.default=o.exports},dByW:function(t,e,a){"use strict";e.e=function(t){return Object(s.a)({url:"/api/ad:banners",method:"get",params:t})},e.f=function(t,e){return Object(s.a)({url:"/api/ad:banners/"+e,method:"PATCH",data:r()(t),headers:{"Content-Type":"application/json;charset=utf-8"}})},e.b=function(t){return Object(s.a)({url:"/api/ad:banners/"+t,method:"delete"})},e.d=function(t){return Object(s.a)({url:"/api/ad:banners/"+t,method:"get"})},e.a=function(t){return Object(s.a)({url:"/api/ad:banners",method:"post",data:r()(t),headers:{"Content-Type":"application/json;charset=utf-8"}})},e.c=function(t){return Object(s.a)({url:"/api/ad:banners/"+t.id,method:"PATCH",data:r()(t),headers:{"Content-Type":"application/json;charset=utf-8"}})};var i=a("3cXf"),r=a.n(i),s=a("vLgD")}});