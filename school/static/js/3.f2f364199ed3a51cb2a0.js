webpackJsonp([3],{HzJ8:function(t,e,a){t.exports={default:a("oMO2"),__esModule:!0}},JJpH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("HzJ8"),n=a.n(l),i=a("//Rb"),r=a("ts7I"),o=a("V/8j"),s={data:function(){return{list:null,listLoading:!0,currentPage:1,totalNum:1,skeyword:"",searchInput:"",inputType:"",platformObj:{size:10},selectInputOptions:[{id:1,name:"學生ID"},{id:2,name:"學生姓名"}],selectSchooltypeOptions:[{id:"Kindergarten",name:"幼兒園"},{id:"PrimarySchool",name:"小學"},{id:"SecondarySchool",name:"中學"}],selectPeriodOptions:[],selectAreaOptions:[]}},created:function(){var t=this;this.platformObj.page=this.currentPage-1,this.fetchData(),Object(o.d)({page:0,size:100}).then(function(e){t.selectAreaOptions=e.data.data.content}),Object(o.f)({page:0,size:100}).then(function(e){t.selectPeriodOptions=e.data.data.content})},methods:{schoolType:a("GKmE").b,handleFilter:function(){""!==this.platformObj.input&&(1==this.inputType&&(this.platformObj.id=this.platformObj.input),2==this.inputType&&(this.platformObj.name=this.platformObj.input)),this.platformObj.input||(delete this.platformObj.id,delete this.platformObj.name,this.inputType=""),""==this.inputType&&(this.platformObj.input="",delete this.platformObj.input),this.platformObj.periodId||delete this.platformObj.periodId,this.platformObj.districtId||delete this.platformObj.districtId,this.platformObj.schoolType||delete this.platformObj.schoolType,this.platformObj.schoolId||delete this.platformObj.schoolId,this.fetchData()},fetchData:function(){var t=this;this.listLoading=!0,Object(r.a)(this.platformObj).then(function(e){t.list=e.data.data.content,t.totalNum=e.data.data.totalElements,t.listLoading=!1})},querySearch:function(t,e){if(""!==this.skeyword){var a={page:0,size:100,name:this.skeyword};this.platformObj.districtId&&(a.districtId=this.platformObj.districtId),this.platformObj.districtId||delete a.districtId,this.platformObj.type&&(a.type=this.platformObj.type),this.platformObj.type||delete a.type,Object(i.d)(a).then(function(t){var a=t.data.data.content,l=!0,i=!1,r=void 0;try{for(var o,s=n()(a);!(l=(o=s.next()).done);l=!0){var c=o.value;c.value=c.name}}catch(t){i=!0,r=t}finally{try{!l&&s.return&&s.return()}finally{if(i)throw r}}e(a)})}},handleSelect:function(t){this.platformObj.schoolId=t.id},handleCurrentChange:function(t){this.currentPage=t,this.fetchData()},userDetail:function(t){this.$router.push({name:"studentInfo",params:{name:t.name,number:t.schoolNumber,period:t.period.year,class:t.classNo.name,grade:t.grade.name,school:t.schoolName,idcard:t.idCard,tel:t.guardianMobile}})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"105px"},attrs:{clearable:"",placeholder:"搜索項"},model:{value:t.inputType,callback:function(e){t.inputType=e},expression:"inputType"}},t._l(t.selectInputOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{clearable:"",placeholder:"請輸入"},model:{value:t.platformObj.input,callback:function(e){t.$set(t.platformObj,"input",e)},expression:"platformObj.input"}}),t._v(" "),a("span",{staticStyle:{margin:"0 0 0 15px"}},[t._v("學年：")]),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"學年"},model:{value:t.platformObj.periodId,callback:function(e){t.$set(t.platformObj,"periodId",e)},expression:"platformObj.periodId"}},t._l(t.selectPeriodOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.year+"學年",value:t.id}})})),t._v(" "),a("span",{staticStyle:{margin:"0 0 0 15px"}},[t._v("區域：")]),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"區域"},model:{value:t.platformObj.districtId,callback:function(e){t.$set(t.platformObj,"districtId",e)},expression:"platformObj.districtId"}},t._l(t.selectAreaOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("span",{staticStyle:{margin:"0 0 0 15px"}},[t._v("類型：")]),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"類型"},model:{value:t.platformObj.schoolType,callback:function(e){t.$set(t.platformObj,"schoolType",e)},expression:"platformObj.schoolType"}},t._l(t.selectSchooltypeOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("span",{staticStyle:{margin:"0 0 0 15px"}},[t._v("學校：")]),t._v(" "),a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"150px"},attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入","trigger-on-focus":!1},on:{select:t.handleSelect},model:{value:t.skeyword,callback:function(e){t.skeyword=e},expression:"skeyword"}}),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),a("br"),a("br"),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"序號",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(10*(t.currentPage-1)+e.$index+1)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"學生姓名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.name)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"學號/ID",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.schoolNumber)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"學年",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.period.year+"學年")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"年級",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.grade.name)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"班級",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.classNo.name)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"學校",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.schoolName)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"區域",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.district.name)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"類型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.schoolType(e.row.schoolType))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"創建時間",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("parseTime")(e.row.createTime))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.userDetail(e.row)}}},[t._v("查看")])]}}])})],1),t._v(" "),t.totalNum/10>1?a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[1,10,20,30],"page-size":10,layout:"total, prev, pager, next, jumper",total:t.totalNum},on:{"current-change":t.handleCurrentChange}}):t._e()],1)},staticRenderFns:[]},p=a("/Xao")(s,c,!1,null,null,null);e.default=p.exports},oMO2:function(t,e,a){a("A1pn"),a("IsPG"),t.exports=a("tcIe")},tcIe:function(t,e,a){var l=a("93K8"),n=a("YW8S");t.exports=a("AKd3").getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return l(e.call(t))}}});