webpackJsonp([4],{HzJ8:function(t,e,a){t.exports={default:a("oMO2"),__esModule:!0}},nsJZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("HzJ8"),l=a.n(n),r=a("//Rb"),i=a("GKmE"),o=a("V/8j"),s={data:function(){return{list:null,listLoading:!0,currentPage:1,totalNum:1,platformObj:{size:10},skeyword:"",selectSchooltypeOptions:[{id:"Kindergarten",name:"幼兒園"},{id:"PrimarySchool",name:"小學"},{id:"SecondarySchool",name:"中學"}],selectAreaOptions:[]}},created:function(){var t=this;this.platformObj.page=this.currentPage-1,this.fetchData(),Object(o.d)({page:0,size:100}).then(function(e){t.selectAreaOptions=e.data.data.content})},methods:{schoolType:i.b,handleFilter:function(){this.platformObj.districtId||delete this.platformObj.districtId,this.platformObj.type||delete this.platformObj.type,""!==this.skeyword&&(this.platformObj.name=this.skeyword),this.platformObj.name||delete this.platformObj.name,this.fetchData()},fetchData:function(){var t=this;this.listLoading=!0,Object(r.d)(this.platformObj).then(function(e){t.list=e.data.data.content,t.totalNum=e.data.data.totalElements,t.listLoading=!1})},querySearch:function(t,e){if(""!==this.skeyword){var a={page:0,size:100,name:this.skeyword};this.platformObj.districtId&&(a.districtId=this.platformObj.districtId),this.platformObj.districtId||delete a.districtId,this.platformObj.type&&(a.type=this.platformObj.type),this.platformObj.type||delete a.type,Object(r.d)(a).then(function(t){var a=t.data.data.content,n=!0,r=!1,i=void 0;try{for(var o,s=l()(a);!(n=(o=s.next()).done);n=!0){var c=o.value;c.value=c.name}}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}e(a)})}},handleSelect:function(t){this.platformObj.name=t.name},handleCurrentChange:function(t){this.currentPage=t,this.fetchData()},handleAdd:function(t,e){this.$router.push({path:"schooledit/"+t+"/"+e})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.handleAdd(1,-1)}}},[t._v("添加學校")]),t._v(" "),a("span",{staticStyle:{margin:"0 0 0 20px"}},[t._v("區域：")]),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"區域"},model:{value:t.platformObj.districtId,callback:function(e){t.$set(t.platformObj,"districtId",e)},expression:"platformObj.districtId"}},t._l(t.selectAreaOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("span",{staticStyle:{margin:"0 0 0 30px"}},[t._v("類型：")]),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"類型"},model:{value:t.platformObj.type,callback:function(e){t.$set(t.platformObj,"type",e)},expression:"platformObj.type"}},t._l(t.selectSchooltypeOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("span",{staticStyle:{margin:"0 0 0 30px"}},[t._v("學校：")]),t._v(" "),a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"180px"},attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入","trigger-on-focus":!1},on:{select:t.handleSelect},model:{value:t.skeyword,callback:function(e){t.skeyword=e},expression:"skeyword"}}),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),a("br"),a("br"),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"学校ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(10*(t.currentPage-1)+e.$index+1)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"学校名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.name)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"管理員姓名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.masterUser?e.row.masterUser.name:"--")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"区域",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.district?e.row.district.name:"--")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"類型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.schoolType(e.row.type))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"創建時間",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("parseTime")(e.row.createTime))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(a){t.handleAdd(-1,e.row.id)}}},[t._v("编辑")])]}}])})],1),t._v(" "),t.totalNum/10>1?a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[1,10,20,30],"page-size":10,layout:"total, prev, pager, next, jumper",total:t.totalNum},on:{"current-change":t.handleCurrentChange}}):t._e()],1)},staticRenderFns:[]},d=a("/Xao")(s,c,!1,null,null,null);e.default=d.exports},oMO2:function(t,e,a){a("A1pn"),a("IsPG"),t.exports=a("tcIe")},tcIe:function(t,e,a){var n=a("93K8"),l=a("YW8S");t.exports=a("AKd3").getIterator=function(t){var e=l(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}}});