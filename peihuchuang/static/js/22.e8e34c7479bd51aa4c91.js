webpackJsonp([22],{"cn/o":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("SgkS"),i={data:function(){return{form:{status:"",name:null},rules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}]},statusOptions:[{id:"1",name:"未故障"},{id:"2",name:"已故障"}],eventOptions:[{id:"wait",name:"待处理"},{id:"ing",name:"跟进中，故障等待修复"},{id:"done",name:"跟进中，故障已处理"}],baseURL:"http://47.107.249.233:8086/api/oss",dialogImageUrl:"",dialogImgVisible:!1,status:"",remark:""}},created:function(){var e=this;Object(r.g)({id:parseInt(this.$route.params.id)}).then(function(t){e.form=t.data.data,e.status=e.form.feedback.status})},methods:{handleImageScucess:function(e,t,a){this.form.avatar=e.data},handlePictureCardPreview:function(e){this.dialogImageUrl=e,this.dialogImgVisible=!0},cabinetStatus:function(e){return"wait"==e?"待租用":"using"==e?"租用中":"unclean"==e?"待清洁":"error"==e?"故障中":"--"},eventStatus:function(e){return"wait"==e?"待处理":"ing"==e?"跟进中，故障等待修复":"done"==e?"跟进中，故障已处理":"--"},cabinetDetail:function(){this.$router.push({path:"/cabinet/cabinetdetail/"+this.form.cabinet.cabinet.sn})},submitRes:function(){var e=this;this.status?this.remark?Object(r.b)({remark:this.remark,status:this.status,id:this.form.feedback.id}).then(function(t){0==t.data.code?(e.$message({message:"已设置"+e.eventStatus(e.status),type:"success"}),e.goBack()):e.$message({message:t.data.message||"操作失败",type:"warning"})}):this.$message({message:"备注不为空",type:"warning"}):this.$message({message:"请选择事件状态",type:"warning"})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e.form?a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"故障编号："}},[e._v("\n      "+e._s(e.form.feedback&&e.form.feedback.id)+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间："}},[e._v("\n      "+e._s(e.form.feedback&&e.form.feedback.createTime||"--")+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"医院名称："}},[e._v("\n      "+e._s(e.form.cabinet&&e.form.cabinet.hospital&&e.form.cabinet.hospital.name||"--")+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"医院联系人："}},[e._v("\n      "+e._s(e.form.cabinet&&e.form.cabinet.hospital&&e.form.cabinet.hospital.linkman||"--")+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"医院联系人方式："}},[e._v("\n      "+e._s(e.form.cabinet&&e.form.cabinet.hospital&&e.form.cabinet.hospital.phone||"--")+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"科室："}},[e._v("\n      "+e._s(e.form.cabinet&&e.form.cabinet.office&&e.form.cabinet.office.name||"--")+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"科室联系人："}},[e._v("\n      "+e._s(e.form.cabinet&&e.form.cabinet.office&&e.form.cabinet.office.linkman||"--")+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"科室联系人方式："}},[e._v("\n      "+e._s(e.form.cabinet&&e.form.cabinet.office&&e.form.cabinet.office.phone||"--")+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"柜子编号："}},[e._v("\n      "+e._s(e.form.cabinet&&e.form.cabinet.cabinet&&e.form.cabinet.cabinet.sn||"--")+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"柜子状态："}},[e._v("\n      "+e._s(e.cabinetStatus(e.form.cabinet&&e.form.cabinet.cabinet&&e.form.cabinet.cabinet.status))+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"故障状态","label-width":"160px"}},[e._v("\n      "+e._s(e.form.cabinet&&e.form.cabinet.cabinet&&"error"==e.form.cabinet.cabinet.errorStatus?"有故障":e.form.cabinet&&"noraml"==e.form.cabinet.cabinet.errorStatus?"无故障":"--")+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"发起人ID："}},[e._v("\n      "+e._s(e.form.feedback&&e.form.feedback.id||"--")+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"发起人昵称："}},[e._v("\n      "+e._s(e.form.feedback&&e.form.feedback.reviewName||"--")+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"发起人联系方式："}},[e._v("\n      "+e._s(e.form.feedback&&e.form.feedback.reviewName||"--")+"\n    ")]),e._v(" "),a("el-form-item",{attrs:{label:"照片："}},[e.form.feedback&&e.form.feedback.photoUrl?a("div",{staticStyle:{"margin-left":"20px",display:"inline-block"}},[a("img",{staticStyle:{"max-width":"200px","max-height":"160px",cursor:"pointer","vertical-align":"middle"},attrs:{src:e.form.feedback.photoUrl,alt:""},on:{click:function(t){e.handlePictureCardPreview(e.form.feedback.photoUrl)}}})]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"反馈内容："}},[e._v("\n      "+e._s(e.form.feedback&&e.form.feedback.content||"--")+"\n    ")]),e._v(" "),e.form.feedback&&"done"==e.form.feedback.status?a("el-form-item",{attrs:{label:"事件状态：","label-width":"160px"}},[e._v("\n      "+e._s(e.eventStatus(e.form.feedback&&e.form.feedback.status))+"\n    ")]):e._e(),e._v(" "),e.form.feedback&&"done"==e.form.feedback.status?e._e():a("el-form-item",{attrs:{label:"事件状态：","label-width":"160px"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"40%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.eventOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),e.form.feedback&&"done"==e.form.feedback.status?a("el-form-item",{attrs:{label:"备注："}},[e._v("\n      "+e._s(e.form.feedback&&e.form.feedback.reviewRemark||"--")+"\n    ")]):e._e(),e._v(" "),e.form.feedback&&"done"==e.form.feedback.status?e._e():a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{staticStyle:{width:"40%"},attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[e.form.feedback&&"done"==e.form.feedback.status?e._e():a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRes()}}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.cabinetDetail()}}},[e._v("查看柜子")]),e._v(" "),a("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1):e._e(),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogImgVisible},on:{"update:visible":function(t){e.dialogImgVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]},s=a("VU/8")(i,n,!1,null,null,null);t.default=s.exports}});