webpackJsonp([1],{E2dV:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};s.d(n,"parseTime",function(){return C}),s.d(n,"formatTime",function(){return w});var a=s("ZLEe"),i=s.n(a),r=s("MVMM"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var c=s("vSla")({name:"App"},o,!1,function(e){s("E2dV")},null,null).exports,l=s("zO6J"),m={name:"taskItem",data:function(){return{}},props:{list:{type:Array}},methods:{nameFormate:function(e){return e.length>=2?e.substr(-2,1)+e.substr(-1,1):e}},created:function(){}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"task-container"},e._l(e.list,function(t,n){return s("div",{staticClass:"task-item"},[s("span",{staticClass:"name"},[e._v(e._s(e.nameFormate(t.name)))]),e._v(" "),s("div",{staticClass:"item-content"},[s("div",{staticClass:"item-top"},[s("span",[e._v(e._s(e.nameFormate(t.name))),s("span",{staticClass:"item-work"},[e._v(e._s(t.action))])]),e._v(" "),s("span",[e._v(e._s(e._f("parseTime")(t.createTime,"{y}.{m}.{d} {h}:{i}")))])]),e._v(" "),s("div",{staticClass:"work-dec"},[e._v(e._s(t.taskTitle))]),e._v(" "),t.cancelReason?s("div",{staticClass:"cancel-reason"},[e._v("取消原因："+e._s(t.cancelReason))]):e._e()])])}))},staticRenderFns:[]},d={name:"taskList",data:function(){return{page:0,size:10,recordList:[],isLoading:!0,isOver:!1}},components:{taskItem:s("vSla")(m,u,!1,null,null,null).exports},methods:{getTasklist:function(e,t){e.$ajax({method:"GET",url:e.api+"/api/record?page="+t+"&size="+e.size+"&sort=createTime,desc"}).then(function(t){t.data.content.length<e.size&&(e.isOver=!0,e.isLoading=!1),e.recordList=e.recordList.concat(t.data.content),console.log(e.recordList)}).catch(function(e){console.log(e)})}},mounted:function(){var e=this;window.onscroll=function(){if(window.screen.height+(document.body.scrollTop||document.documentElement.scrollTop)>=(document.body.scrollHeight||document.documentElement.scrollHeight)){if(e.isOver)return;e.page++,e.getTasklist(e,e.page)}}},created:function(){this.getTasklist(this,this.page)}},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"task-list"},[s("taskItem",{attrs:{list:e.recordList}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"loading-wrap"},[s("i"),e._v(" "),s("span",[e._v("加载中...")])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isOver,expression:"isOver"}],staticClass:"loaded"},[e._v("没有更多数据")])],1)},staticRenderFns:[]},p=s("vSla")(d,v,!1,null,null,null).exports,h={name:"memberList",data:function(){return{page:0,size:10,adminList:[],memberList:[]}},methods:{nameFormate:function(e){return e.length>=2?e.substr(-2,1)+e.substr(-1,1):e},chosenMember:function(e){this.adminList.map(function(t,s){t.id==e?t.isChosen=!0:t.isChosen=!1}),this.memberList.map(function(t,s){t.id==e?t.isChosen=!0:t.isChosen=!1}),window.webkit.messageHandlers.avatarClick.postMessage(e)},getMemberlist:function(e,t){e.$ajax({method:"GET",url:e.api+"/api/user?page="+t+"&size="+e.size+"&sort=createTime,desc"}).then(function(t){t.data.content.map(function(t,s){t.randomcolor=parseInt(12*Math.random()+1,10),t.isChosen=!1,0==t.userType&&e.memberList.push(t),1==t.userType&&e.adminList.push(t)})}).catch(function(e){console.log(e)})}},mounted:function(){},created:function(){this.getMemberlist(this,this.page)}},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"member-list"},[s("div",{staticClass:"top"},[e._v("任务分配给指定员工负责，对方在任务开始和快过期会收到 推送.")]),e._v(" "),s("div",{staticClass:"tit"},[e._v("负责人、管理员")]),e._v(" "),s("ul",{staticClass:"list-item"},e._l(e.adminList,function(t,n){return s("li",{on:{click:function(s){e.chosenMember(t.id)}}},[s("span",{staticClass:"name-box",class:"color"+t.randomcolor},[e._v(e._s(e.nameFormate(t.realName)))]),e._v(" "),s("span",{staticClass:"name"},[e._v(e._s(e.nameFormate(t.realName)))]),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:t.isChosen,expression:"item.isChosen"}],staticClass:"is-chosen"})])})),e._v(" "),s("div",{staticClass:"tit"},[e._v("成员")]),e._v(" "),s("ul",{staticClass:"list-item"},e._l(e.memberList,function(t,n){return s("li",{on:{click:function(s){e.chosenMember(t.id)}}},[s("span",{staticClass:"name-box",class:"color"+t.randomcolor},[e._v(e._s(e.nameFormate(t.realName)))]),e._v(" "),s("span",{staticClass:"name"},[e._v(e._s(e.nameFormate(t.realName)))]),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:t.isChosen,expression:"item.isChosen"}],staticClass:"is-chosen"})])}))])},staticRenderFns:[]},f=s("vSla")(h,_,!1,null,null,null).exports;r.a.use(l.a);var g=new l.a({routes:[{path:"/record",name:"taskList",component:p},{path:"/",name:"taskList",component:p},{path:"/member",name:"memberList",component:f}]});function C(e,t){if(e=e.replace(/-/g,"/"),0===arguments.length)return null;10===(e+"").length&&(e=1e3*+e);var s=t||"{y}-{m}-{d} {h}:{i}:{s}",n=new Date(e),a={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()};return s.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var s=a[t];return"a"===t?["一","二","三","四","五","六","日"][s-1]:(e.length>0&&s<10&&(s="0"+s),s||0)})}function w(e,t){e=1e3*+e;var s=new Date(e),n=(Date.now()-s)/1e3;return n<30?"刚刚":n<3600?Math.ceil(n/60)+"分钟前":n<86400?Math.ceil(n/3600)+"小时前":n<172800?"1天前":t?C(e,t):s.getMonth()+1+"月"+s.getDate()+"日"+s.getHours()+"时"+s.getMinutes()+"分"}var b=s("aozt"),L=s.n(b);r.a.config.productionTip=!1,i()(n).forEach(function(e){r.a.filter(e,n[e])}),r.a.prototype.$ajax=L.a,r.a.prototype.api="http://120.24.183.106:9089",new r.a({el:"#app",router:g,components:{App:c},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.5f6b330693a53f13ea1a.js.map