webpackJsonp([3],{"S/Jp":function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o={name:"carSpace",data:function(){return{workspaceList:[],showMask:!1,workName:"",editItem:{},editFlag:-1}},methods:{getWorkshopList:function(t){t.$ajax({method:"GET",url:t.api+"/api/workshop?page=0&size=100&isDelete=0&sort=createTime,desc"}).then(function(a){t.workspaceList=a.data.data.content}).catch(function(t){console.log(t)})},deleteWorkshop:function(t){var a=this;a.$ajax({method:"delete",url:a.api+"/api/workshop/"+t}).then(function(t){0==t.data.code&&a.getWorkshopList(a),console.log(t)}).catch(function(t){console.log(t)})},editWorkshop:function(t){this.editFlag=1,this.showMask=!0,this.editItem=t,this.workName=t.name},hideWorkshop:function(){this.showMask=!1},showAdd:function(){this.editFlag=-1,this.showMask=!0,this.workName=""},confirmEdit:function(){var t=this;""!=t.workName?(1==this.editFlag&&(t.workspaceList.map(function(a,s){a.id==t.editItem.id&&(a.name=t.workName)}),t.$ajax({method:"PUT",url:t.api+"/api/workshop/all",data:t.workspaceList}).then(function(a){t.workName="",t.showMask=!1,console.log(a.data.data)}).catch(function(t){console.log(t)})),-1==this.editFlag&&t.$ajax({method:"post",url:t.api+"/api/workshop",data:{status:0,name:t.workName}}).then(function(a){t.workName="",t.showMask=!1,t.getWorkshopList(t)}).catch(function(t){console.log(t)})):alert("车间名称不为空")}},mounted:function(){var t=this;window.showAdd=function(){t.showAdd()}},created:function(){this.getWorkshopList(this)}},e={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"car-space"},[s("ul",{staticClass:"space-list"},t._l(t.workspaceList,function(a,o){return s("li",[s("span",{staticClass:"name"},[t._v(t._s(a.name))]),t._v(" "),s("div",{staticClass:"operator"},[s("span",{staticClass:"del",on:{click:function(s){t.deleteWorkshop(a.id)}}}),t._v(" "),s("span",{staticClass:"edit",on:{click:function(s){t.editWorkshop(a)}}})])])})),t._v(" "),t.showMask?s("div",{staticClass:"mask"}):t._e(),t._v(" "),t.showMask?s("div",{staticClass:"mask-box"},[s("p",{staticClass:"mask-tit"},[t._v(t._s(1==t.editFlag?"修改车间名称":"添加车间名称"))]),t._v(" "),s("div",{staticClass:"mask-inputbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.workName,expression:"workName"}],staticClass:"mask-input",attrs:{placeholder:"请输入车间名称",type:"text",name:"",value:""},domProps:{value:t.workName},on:{input:function(a){a.target.composing||(t.workName=a.target.value)}}})]),t._v(" "),s("ul",{staticClass:"bottombtn-list"},[s("li",{on:{click:function(a){t.hideWorkshop()}}},[t._v("取消")]),t._v(" "),s("li",{on:{click:function(a){t.confirmEdit()}}},[t._v("确认")])])]):t._e()])},staticRenderFns:[]},i=s("vSla")(o,e,!1,null,null,null);a.default=i.exports}});