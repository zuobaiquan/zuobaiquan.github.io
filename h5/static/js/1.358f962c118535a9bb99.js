webpackJsonp([1],{"3cXf":function(t,s,i){t.exports={default:i("RJ+u"),__esModule:!0}},A9aX:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=i("3cXf"),n=i.n(o),a={name:"taskList",data:function(){return{workshopList:[],showMask:!1}},methods:{getWorkshopList:function(t){var s=t.api+"/api/workshop?page=0&size=100&isDelete=0&sort=createTime,desc";t.$ajax({method:"GET",url:s}).then(function(s){t.workshopList=s.data.data.content}).catch(function(t){console.log(t)})},setStatus:function(t,s){this.workshopList.map(function(i,o){t.id!=i.id||(i.status=s)})},hideWorkshop:function(){this.showMask=!1},resetList:function(){var t=this;this.workshopList.map(function(t,s){t.status=0}),t.$ajax({method:"PUT",url:t.api+"/api/workshop/all",data:t.workshopList}).then(function(s){console.log(t.workshopList)}).catch(function(t){console.log(t)})},confirmList:function(){this.isStatus(this.workshopList)?this.$ajax({method:"PUT",url:this.api+"/api/workshop/all",data:this.workshopList}).then(function(t){window.webkit.messageHandlers.submitClick.postMessage(n()(t.data.data))}).catch(function(t){console.log(t)}):this.showMask=!0},isStatus:function(t){return t.find(function(t){return 0!==t.status})}},created:function(){this.getWorkshopList(this),document.body.className="bgWhite"},beforeDestroy:function(){document.body.className=""}},c={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"workshop-state"},[i("div",{staticClass:"state-container"},[t._m(0),t._v(" "),i("ul",{staticClass:"workshop-list"},t._l(t.workshopList,function(s,o){return i("li",[i("span",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),i("ul",{staticClass:"status-list"},[i("li",{class:2==s.status?"working":"",on:{click:function(i){t.setStatus(s,2)}}},[t._v("生产中")]),t._v(" "),i("li",{class:3==s.status?"stoping":"",on:{click:function(i){t.setStatus(s,3)}}},[t._v("停产中")]),t._v(" "),i("li",{class:1==s.status?"notwork":"",on:{click:function(i){t.setStatus(s,1)}}},[t._v("非生产")])])])}))]),t._v(" "),i("ul",{staticClass:"btn-list"},[i("li",{on:{click:function(s){t.resetList()}}},[t._v("重置")]),t._v(" "),i("li",{on:{click:function(s){t.confirmList()}}},[t._v("确认")])]),t._v(" "),t.showMask?i("div",{staticClass:"mask"}):t._e(),t._v(" "),t.showMask?i("div",{staticClass:"mask-box"},[i("p",{staticClass:"mask-tit"},[t._v("请先选择车间状态")]),t._v(" "),i("ul",{staticClass:"bottombtn-list"},[i("li",{on:{click:function(s){t.hideWorkshop()}}},[t._v("取消")]),t._v(" "),i("li",{on:{click:function(s){t.hideWorkshop()}}},[t._v("确认")])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("ul",{staticClass:"status-box"},[s("li",{staticClass:"working"},[this._v("生产中")]),this._v(" "),s("li",{staticClass:"stoping"},[this._v("停产中")]),this._v(" "),s("li",{staticClass:"notwork"},[this._v("非生产")])])}]},e=i("vSla")(a,c,!1,null,null,null);s.default=e.exports},"RJ+u":function(t,s,i){var o=i("AKd3"),n=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}}});
//# sourceMappingURL=1.358f962c118535a9bb99.js.map