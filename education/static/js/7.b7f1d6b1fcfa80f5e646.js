webpackJsonp([7],{"3m8R":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("byaH"),s=a("/dGt"),o=(a("9rMa"),{name:"gbtc-box",data:function(){return{inputName:"",startEndTime:"",schoolId:"",selectSchool:[],gradeId:"",selectGrade:[],list:[],multipleSelection:[],listLoading:!0,currentPage:1,totalNum:1,searchObj:{},dialogImport:!1,dialogExport:!1,fileList:[],exportStatus:"success"}},components:{pie:s.a},created:function(){this.fetchData()},methods:{changeSchool:function(t){var e=this;this.gradeId="",getGradesList({schoolId:t}).then(function(t){200==t.status&&(e.selectGrade=t.data.data)})},handleExceed:function(t,e){this.$message.warning("当前限制选择 3 个文件，本次选择了 "+t.length+" 个文件，共选择了 "+(t.length+e.length)+" 个文件")},importTable:function(){this.dialogImport=!0},exportTable:function(){this.dialogExport=!0},handleFilter:function(){this.currentPage=1,String(this.searchObj.classId)||delete this.searchObj.classId,String(this.searchObj.schoolId)||delete this.searchObj.schoolId,this.startEndTime?(this.searchObj.reportBeginDate=this.parseTime(this.startEndTime[0],"{y}-{m}-{d}"),this.searchObj.reportEndDate=this.parseTime(this.startEndTime[1],"{y}-{m}-{d}")):(delete this.searchObj.reportBeginDate,delete this.searchObj.reportEndDate),this.fetchData()},fetchData:function(){var t=this;this.listLoading=!0,this.searchObj.pageNumber=this.currentPage,Object(l.c)(this.searchObj).then(function(e){t.list=e.data.data.records,t.totalNum=e.data.data.total,t.listLoading=!1})},handleCurrentChange:function(t){this.currentPage=t,this.fetchData()},handleSelectionChange:function(t){this.multipleSelection=t},jlEdit:function(t){this.$router.push({path:"tcdxjldetail/1"})}}}),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gbtc-container"},[a("header",[a("span",{staticClass:"option-lable"},[t._v("学校")]),t._v(" "),a("el-select",{attrs:{placeholder:"全部"},on:{change:t.changeSchool},model:{value:t.schoolId,callback:function(e){t.schoolId=e},expression:"schoolId"}},t._l(t.selectSchool,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("span",{staticClass:"option-lable option-mgleft"},[t._v("年级")]),t._v(" "),a("el-select",{attrs:{placeholder:"全部"},model:{value:t.gradeId,callback:function(e){t.gradeId=e},expression:"gradeId"}},t._l(t.selectGrade,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("span",{staticClass:"option-lable option-mgleft"},[t._v("体测时间")]),t._v(" "),a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.startEndTime,callback:function(e){t.startEndTime=e},expression:"startEndTime"}}),t._v(" "),t._m(0)],1),t._v(" "),a("div",{staticClass:"jlop-box"},[a("div",[a("span",{on:{click:function(e){t.importTable()}}},[t._v("导入")]),t._v(" "),a("span",{on:{click:function(e){t.exportTable()}}},[t._v("导出")])]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[t._v("批量删除")])]),t._v(" "),a("div",{staticClass:"jl-table"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"序号",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("1"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"体测项目",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("肺活量")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"体测学员姓名","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("张散铃")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"性别","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("男")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"体测结果","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("4000毫升")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"体测班级","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("五年4班")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"体测日期","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.date))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-edit",on:{click:function(e){t.jlEdit()}}}),t._v(" "),a("span",{staticClass:"jl-delete"})]}}])})],1),t._v(" "),t.totalNum/10>1?a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[1,10,20,30],"page-size":10,layout:"total, prev, pager, next, jumper",total:t.totalNum},on:{"current-change":t.handleCurrentChange}}):t._e(),t._v(" "),t.dialogImport?a("div",{staticClass:"dialog-box"},[a("p",{staticClass:"dialog-title"},[t._v("导入数据文件")]),t._v(" "),a("ul",{staticClass:"dialog-selectitem"},[a("li",[a("span",{staticClass:"option-dialog"},[t._v("所属学校")]),t._v(" "),a("el-select",{attrs:{placeholder:"全部"},model:{value:t.selGrade,callback:function(e){t.selGrade=e},expression:"selGrade"}},t._l(t.selectGrade,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("li",[a("span",{staticClass:"option-dialog"},[t._v("班级")]),t._v(" "),a("el-select",{attrs:{placeholder:"全部"},model:{value:t.selGrade,callback:function(e){t.selGrade=e},expression:"selGrade"}},t._l(t.selectGrade,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("li",[a("span",{staticClass:"option-dialog"},[t._v("上传文件")]),t._v(" "),a("el-upload",{staticStyle:{display:"inline-block","margin-left":"24px"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",limit:1,"on-exceed":t.handleExceed,"file-list":t.fileList}},[a("div",{staticClass:"upload-box"},[a("a",{attrs:{href:"javascript:;"}},[t._v("选择文件")]),t._v(" "),a("span",[t._v("未选择任何文件")])])])],1)]),t._v(" "),a("div",{staticClass:"dialog-btn"},[a("span",{staticClass:"dialog-cancle",on:{click:function(e){t.dialogImport=!1}}},[t._v("取消")]),t._v(" "),a("span",{staticClass:"dialog-confirm",on:{click:function(e){t.dialogImport=!1}}},[t._v("确定导入")])])]):t._e(),t._v(" "),t.dialogExport?a("div",{staticClass:"dialog-box"},[a("p",{staticClass:"dialog-title"},[t._v("导入提示")]),t._v(" "),a("i",{staticClass:"dialog-icon",class:{"export-status":"success"==t.exportStatus}}),t._v(" "),"success"==t.exportStatus?a("div",{staticClass:"dialog-tips"},[t._v("已经成功导入全部数据：100")]):t._e(),t._v(" "),"success"!==t.exportStatus?a("div",{staticClass:"dialog-tips"},[a("p",[t._v("已经成功导入数量：10")]),t._v(" "),a("p",[t._v("本次导入失败数量：90")])]):t._e(),t._v(" "),a("div",{staticClass:"dialog-btn"},[a("span",{staticClass:"dialog-cancle",on:{click:function(e){t.dialogExport=!1}}},[t._v("返回")])])]):t._e()],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn-operator"},[e("span",{staticClass:"search-btn"},[this._v("搜索")]),this._v(" "),e("span",{staticClass:"reset-btn"},[this._v("重置")])])}]},n=a("/Xao")(o,i,!1,null,null,null);e.default=n.exports},byaH:function(t,e,a){"use strict";e.b=function(t){return Object(l.a)({url:"/edu/gb/test/gradereports",method:"get",params:t})},e.a=function(t){return Object(l.a)({url:"/edu/gb/test/gradereports/grades",method:"get",params:t})},e.c=function(t){return Object(l.a)({url:"/edu/gb/test/sports",method:"get",params:t})};var l=a("vLgD")}});