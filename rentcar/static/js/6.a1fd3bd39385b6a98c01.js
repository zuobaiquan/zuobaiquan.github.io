webpackJsonp([6],{"5aCZ":function(t,e,a){"use strict";var n=a("TIfe"),i=a("2sCs"),o=a.n(i),s={name:"Tinymce",props:{id:{type:String,default:"tinymceEditor"},height:{type:Number,default:300},width:{type:Number,default:null},value:{type:String,default:""},data:function(){return{hasChange:!1,hasInit:!1}}},mounted:function(){var t=this,e=this;tinymce.init({selector:"#"+this.id,language:"zh_CN",height:this.height,width:this.width,menubar:!1,plugins:["advlist autolink lists link image imagetools charmap print preview anchor textcolor","searchreplace visualblocks code fullscreen textcolor colorpicker","insertdatetime media table contextmenu paste code help"],toolbar:["insert | undo redo | table styleselect | bold italic backcolor forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | removeformat code"],images_upload_url:"postAcceptor.php",init_instance_callback:function(a){e.value&&a.setContent(e.value),e.hasInit=!0,a.on("NodeChange Change KeyUp",function(){t.hasChange=!0,t.$emit("input",a.getContent({format:"raw"}))})},images_upload_handler:function(t,e,a){o.a.defaults.headers.common.Authorization=Object(n.e)();var i=new FormData;i.append("file",t.blob()),o.a.post("http://47.106.224.185:8086/api/upload",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){var a=t.data.data;e(a)}).catch(function(t){console.log(t)})}})},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return tinymce.get(e.id).setContent(t)})}},destroyed:function(){tinymce.get(this.id).destroy()}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tinymce-container editor-container"},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.id}})])},staticRenderFns:[]};var l=a("/Xao")(s,r,!1,function(t){a("VocL")},"data-v-3b35bfd9",null);e.a=l.exports},FbxW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("0ChT"),i={data:function(){return{form:{title:"",content:""},rules:{content:[{required:!0,message:"内容不能为空",trigger:"blur"}]},editid:this.$route.params.id,flag:this.$route.params.flag}},components:{Tinymce:a("5aCZ").a},created:function(){-1==this.flag&&this.getArticle(this.editid)},methods:{getArticle:function(t){var e=this;Object(n.d)({id:t}).then(function(t){e.form=t.data.data})},submitRes:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;-1==e.flag?Object(n.c)(e.form).then(function(t){200==t.status&&0==t.data.code?(e.$message({message:"修改成功",type:"success"}),e.goBack()):e.$message({message:t.data.message||"修改失敗",type:"warning"})}):Object(n.a)(e.form).then(function(t){200==t.status&&0==t.data.code?(e.$message({message:"添加成功",type:"success"}),e.dialogFormVisible=!1,e.goBack()):e.$message({message:t.data.message||"添加失敗",type:"warning"})})})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"类型",prop:"title"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入类型名称"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"内容",prop:"content"}},[a("Tinymce",{ref:"editor",attrs:{height:550,width:800,id:"tinymce"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitRes("form")}}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:function(e){t.goBack()}}},[t._v("返回")])],1)],1)],1)},staticRenderFns:[]},s=a("/Xao")(i,o,!1,null,null,null);e.default=s.exports},VocL:function(t,e,a){var n=a("fSGN");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("8bSs")("b4ef3962",n,!0)},fSGN:function(t,e,a){(t.exports=a("BkJT")(!1)).push([t.i,"\n.tinymce-container[data-v-3b35bfd9] {\r\n  position: relative\n}\n.tinymce-textarea[data-v-3b35bfd9] {\r\n  visibility: hidden;\r\n  z-index: -1;\n}\r\n\r\n",""])}});